{"version":3,"file":"static/chunks/630.fdc59185749ac66e.js","mappings":"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","sources":["webpack://_N_E/./node_modules/.pnpm/next@12.2.5_biqbaboplfbrettd7655fr4n2y/node_modules/next/dist/compiled/buffer/index.js","webpack://_N_E/./node_modules/.pnpm/peerjs-js-binarypack@1.0.1/node_modules/peerjs-js-binarypack/lib/binarypack.js","webpack://_N_E/./node_modules/.pnpm/peerjs-js-binarypack@1.0.1/node_modules/peerjs-js-binarypack/lib/bufferbuilder.js","webpack://_N_E/./node_modules/.pnpm/rtcpeerconnection-shim@1.2.15/node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack://_N_E/./node_modules/.pnpm/sdp@2.12.0/node_modules/sdp/sdp.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/_slim.js","webpack://_N_E/./node_modules/.pnpm/engine.io-parser@5.0.4/node_modules/engine.io-parser/build/esm/commons.js","webpack://_N_E/./node_modules/.pnpm/engine.io-parser@5.0.4/node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://_N_E/./node_modules/.pnpm/engine.io-parser@5.0.4/node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://_N_E/./node_modules/.pnpm/engine.io-parser@5.0.4/node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://_N_E/./node_modules/.pnpm/engine.io-parser@5.0.4/node_modules/engine.io-parser/build/esm/index.js","webpack://_N_E/./node_modules/.pnpm/@socket.io+component-emitter@3.1.0/node_modules/@socket.io/component-emitter/index.mjs","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/globalThis.browser.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/util.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transport.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/contrib/yeast.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transports/polling.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/transports/index.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/socket.js","webpack://_N_E/./node_modules/.pnpm/engine.io-client@6.2.2/node_modules/engine.io-client/build/esm/index.js","webpack://_N_E/./node_modules/.pnpm/socket.io-parser@4.2.1/node_modules/socket.io-parser/build/esm/is-binary.js","webpack://_N_E/./node_modules/.pnpm/socket.io-parser@4.2.1/node_modules/socket.io-parser/build/esm/binary.js","webpack://_N_E/./node_modules/.pnpm/socket.io-parser@4.2.1/node_modules/socket.io-parser/build/esm/index.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/on.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/socket.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/manager.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/index.js","webpack://_N_E/./node_modules/.pnpm/socket.io-client@4.5.1/node_modules/socket.io-client/build/esm/url.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/utils.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/common_shim.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://_N_E/./node_modules/.pnpm/webrtc-adapter@7.7.1/node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://_N_E/./node_modules/.pnpm/peerjs@1.4.6/node_modules/peerjs/dist/bundler.mjs","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/LocalStream.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/Mouse.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/ConfirmWindow/ConfirmWindow.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/icons.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/ConfirmWindow/defaults.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/RemoteControl.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/CallWindow.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/dnd.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/AnnotationCanvas.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/Assist.js","webpack://_N_E/./node_modules/.pnpm/@openreplay+tracker-assist@3.5.15_@openreplay+tracker@3.5.16/node_modules/@openreplay/tracker-assist/lib/index.js"],"sourcesContent":["(function(){var e={449:function(e,r){\"use strict\";r.byteLength=byteLength;r.toByteArray=toByteArray;r.fromByteArray=fromByteArray;var t=[];var f=[];var n=typeof Uint8Array!==\"undefined\"?Uint8Array:Array;var i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";for(var o=0,u=i.length;o<u;++o){t[o]=i[o];f[i.charCodeAt(o)]=o}f[\"-\".charCodeAt(0)]=62;f[\"_\".charCodeAt(0)]=63;function getLens(e){var r=e.length;if(r%4>0){throw new Error(\"Invalid string. Length must be a multiple of 4\")}var t=e.indexOf(\"=\");if(t===-1)t=r;var f=t===r?0:4-t%4;return[t,f]}function byteLength(e){var r=getLens(e);var t=r[0];var f=r[1];return(t+f)*3/4-f}function _byteLength(e,r,t){return(r+t)*3/4-t}function toByteArray(e){var r;var t=getLens(e);var i=t[0];var o=t[1];var u=new n(_byteLength(e,i,o));var a=0;var s=o>0?i-4:i;var h;for(h=0;h<s;h+=4){r=f[e.charCodeAt(h)]<<18|f[e.charCodeAt(h+1)]<<12|f[e.charCodeAt(h+2)]<<6|f[e.charCodeAt(h+3)];u[a++]=r>>16&255;u[a++]=r>>8&255;u[a++]=r&255}if(o===2){r=f[e.charCodeAt(h)]<<2|f[e.charCodeAt(h+1)]>>4;u[a++]=r&255}if(o===1){r=f[e.charCodeAt(h)]<<10|f[e.charCodeAt(h+1)]<<4|f[e.charCodeAt(h+2)]>>2;u[a++]=r>>8&255;u[a++]=r&255}return u}function tripletToBase64(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function encodeChunk(e,r,t){var f;var n=[];for(var i=r;i<t;i+=3){f=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);n.push(tripletToBase64(f))}return n.join(\"\")}function fromByteArray(e){var r;var f=e.length;var n=f%3;var i=[];var o=16383;for(var u=0,a=f-n;u<a;u+=o){i.push(encodeChunk(e,u,u+o>a?a:u+o))}if(n===1){r=e[f-1];i.push(t[r>>2]+t[r<<4&63]+\"==\")}else if(n===2){r=(e[f-2]<<8)+e[f-1];i.push(t[r>>10]+t[r>>4&63]+t[r<<2&63]+\"=\")}return i.join(\"\")}},877:function(e,r,t){\"use strict\";\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */var f=t(449);var n=t(543);var i=typeof Symbol===\"function\"&&typeof Symbol.for===\"function\"?Symbol.for(\"nodejs.util.inspect.custom\"):null;r.Buffer=Buffer;r.SlowBuffer=SlowBuffer;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!==\"undefined\"&&typeof console.error===\"function\"){console.error(\"This browser lacks typed array (Uint8Array) support which is required by \"+\"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.\")}function typedArraySupport(){try{var e=new Uint8Array(1);var r={foo:function(){return 42}};Object.setPrototypeOf(r,Uint8Array.prototype);Object.setPrototypeOf(e,r);return e.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,\"parent\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,\"offset\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(e){if(e>o){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}var r=new Uint8Array(e);Object.setPrototypeOf(r,Buffer.prototype);return r}function Buffer(e,r,t){if(typeof e===\"number\"){if(typeof r===\"string\"){throw new TypeError('The \"string\" argument must be of type string. Received type number')}return allocUnsafe(e)}return from(e,r,t)}Buffer.poolSize=8192;function from(e,r,t){if(typeof e===\"string\"){return fromString(e,r)}if(ArrayBuffer.isView(e)){return fromArrayLike(e)}if(e==null){throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)){return fromArrayBuffer(e,r,t)}if(typeof SharedArrayBuffer!==\"undefined\"&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer))){return fromArrayBuffer(e,r,t)}if(typeof e===\"number\"){throw new TypeError('The \"value\" argument must not be of type number. Received type number')}var f=e.valueOf&&e.valueOf();if(f!=null&&f!==e){return Buffer.from(f,r,t)}var n=fromObject(e);if(n)return n;if(typeof Symbol!==\"undefined\"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]===\"function\"){return Buffer.from(e[Symbol.toPrimitive](\"string\"),r,t)}throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}Buffer.from=function(e,r,t){return from(e,r,t)};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(e){if(typeof e!==\"number\"){throw new TypeError('\"size\" argument must be of type number')}else if(e<0){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}}function alloc(e,r,t){assertSize(e);if(e<=0){return createBuffer(e)}if(r!==undefined){return typeof t===\"string\"?createBuffer(e).fill(r,t):createBuffer(e).fill(r)}return createBuffer(e)}Buffer.alloc=function(e,r,t){return alloc(e,r,t)};function allocUnsafe(e){assertSize(e);return createBuffer(e<0?0:checked(e)|0)}Buffer.allocUnsafe=function(e){return allocUnsafe(e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)};function fromString(e,r){if(typeof r!==\"string\"||r===\"\"){r=\"utf8\"}if(!Buffer.isEncoding(r)){throw new TypeError(\"Unknown encoding: \"+r)}var t=byteLength(e,r)|0;var f=createBuffer(t);var n=f.write(e,r);if(n!==t){f=f.slice(0,n)}return f}function fromArrayLike(e){var r=e.length<0?0:checked(e.length)|0;var t=createBuffer(r);for(var f=0;f<r;f+=1){t[f]=e[f]&255}return t}function fromArrayBuffer(e,r,t){if(r<0||e.byteLength<r){throw new RangeError('\"offset\" is outside of buffer bounds')}if(e.byteLength<r+(t||0)){throw new RangeError('\"length\" is outside of buffer bounds')}var f;if(r===undefined&&t===undefined){f=new Uint8Array(e)}else if(t===undefined){f=new Uint8Array(e,r)}else{f=new Uint8Array(e,r,t)}Object.setPrototypeOf(f,Buffer.prototype);return f}function fromObject(e){if(Buffer.isBuffer(e)){var r=checked(e.length)|0;var t=createBuffer(r);if(t.length===0){return t}e.copy(t,0,0,r);return t}if(e.length!==undefined){if(typeof e.length!==\"number\"||numberIsNaN(e.length)){return createBuffer(0)}return fromArrayLike(e)}if(e.type===\"Buffer\"&&Array.isArray(e.data)){return fromArrayLike(e.data)}}function checked(e){if(e>=o){throw new RangeError(\"Attempt to allocate Buffer larger than maximum \"+\"size: 0x\"+o.toString(16)+\" bytes\")}return e|0}function SlowBuffer(e){if(+e!=e){e=0}return Buffer.alloc(+e)}Buffer.isBuffer=function isBuffer(e){return e!=null&&e._isBuffer===true&&e!==Buffer.prototype};Buffer.compare=function compare(e,r){if(isInstance(e,Uint8Array))e=Buffer.from(e,e.offset,e.byteLength);if(isInstance(r,Uint8Array))r=Buffer.from(r,r.offset,r.byteLength);if(!Buffer.isBuffer(e)||!Buffer.isBuffer(r)){throw new TypeError('The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array')}if(e===r)return 0;var t=e.length;var f=r.length;for(var n=0,i=Math.min(t,f);n<i;++n){if(e[n]!==r[n]){t=e[n];f=r[n];break}}if(t<f)return-1;if(f<t)return 1;return 0};Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return true;default:return false}};Buffer.concat=function concat(e,r){if(!Array.isArray(e)){throw new TypeError('\"list\" argument must be an Array of Buffers')}if(e.length===0){return Buffer.alloc(0)}var t;if(r===undefined){r=0;for(t=0;t<e.length;++t){r+=e[t].length}}var f=Buffer.allocUnsafe(r);var n=0;for(t=0;t<e.length;++t){var i=e[t];if(isInstance(i,Uint8Array)){i=Buffer.from(i)}if(!Buffer.isBuffer(i)){throw new TypeError('\"list\" argument must be an Array of Buffers')}i.copy(f,n);n+=i.length}return f};function byteLength(e,r){if(Buffer.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer)){return e.byteLength}if(typeof e!==\"string\"){throw new TypeError('The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. '+\"Received type \"+typeof e)}var t=e.length;var f=arguments.length>2&&arguments[2]===true;if(!f&&t===0)return 0;var n=false;for(;;){switch(r){case\"ascii\":case\"latin1\":case\"binary\":return t;case\"utf8\":case\"utf-8\":return utf8ToBytes(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return t*2;case\"hex\":return t>>>1;case\"base64\":return base64ToBytes(e).length;default:if(n){return f?-1:utf8ToBytes(e).length}r=(\"\"+r).toLowerCase();n=true}}}Buffer.byteLength=byteLength;function slowToString(e,r,t){var f=false;if(r===undefined||r<0){r=0}if(r>this.length){return\"\"}if(t===undefined||t>this.length){t=this.length}if(t<=0){return\"\"}t>>>=0;r>>>=0;if(t<=r){return\"\"}if(!e)e=\"utf8\";while(true){switch(e){case\"hex\":return hexSlice(this,r,t);case\"utf8\":case\"utf-8\":return utf8Slice(this,r,t);case\"ascii\":return asciiSlice(this,r,t);case\"latin1\":case\"binary\":return latin1Slice(this,r,t);case\"base64\":return base64Slice(this,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return utf16leSlice(this,r,t);default:if(f)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase();f=true}}}Buffer.prototype._isBuffer=true;function swap(e,r,t){var f=e[r];e[r]=e[t];e[t]=f}Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!==0){throw new RangeError(\"Buffer size must be a multiple of 16-bits\")}for(var r=0;r<e;r+=2){swap(this,r,r+1)}return this};Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!==0){throw new RangeError(\"Buffer size must be a multiple of 32-bits\")}for(var r=0;r<e;r+=4){swap(this,r,r+3);swap(this,r+1,r+2)}return this};Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!==0){throw new RangeError(\"Buffer size must be a multiple of 64-bits\")}for(var r=0;r<e;r+=8){swap(this,r,r+7);swap(this,r+1,r+6);swap(this,r+2,r+5);swap(this,r+3,r+4)}return this};Buffer.prototype.toString=function toString(){var e=this.length;if(e===0)return\"\";if(arguments.length===0)return utf8Slice(this,0,e);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(this===e)return true;return Buffer.compare(this,e)===0};Buffer.prototype.inspect=function inspect(){var e=\"\";var t=r.INSPECT_MAX_BYTES;e=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim();if(this.length>t)e+=\" ... \";return\"<Buffer \"+e+\">\"};if(i){Buffer.prototype[i]=Buffer.prototype.inspect}Buffer.prototype.compare=function compare(e,r,t,f,n){if(isInstance(e,Uint8Array)){e=Buffer.from(e,e.offset,e.byteLength)}if(!Buffer.isBuffer(e)){throw new TypeError('The \"target\" argument must be one of type Buffer or Uint8Array. '+\"Received type \"+typeof e)}if(r===undefined){r=0}if(t===undefined){t=e?e.length:0}if(f===undefined){f=0}if(n===undefined){n=this.length}if(r<0||t>e.length||f<0||n>this.length){throw new RangeError(\"out of range index\")}if(f>=n&&r>=t){return 0}if(f>=n){return-1}if(r>=t){return 1}r>>>=0;t>>>=0;f>>>=0;n>>>=0;if(this===e)return 0;var i=n-f;var o=t-r;var u=Math.min(i,o);var a=this.slice(f,n);var s=e.slice(r,t);for(var h=0;h<u;++h){if(a[h]!==s[h]){i=a[h];o=s[h];break}}if(i<o)return-1;if(o<i)return 1;return 0};function bidirectionalIndexOf(e,r,t,f,n){if(e.length===0)return-1;if(typeof t===\"string\"){f=t;t=0}else if(t>2147483647){t=2147483647}else if(t<-2147483648){t=-2147483648}t=+t;if(numberIsNaN(t)){t=n?0:e.length-1}if(t<0)t=e.length+t;if(t>=e.length){if(n)return-1;else t=e.length-1}else if(t<0){if(n)t=0;else return-1}if(typeof r===\"string\"){r=Buffer.from(r,f)}if(Buffer.isBuffer(r)){if(r.length===0){return-1}return arrayIndexOf(e,r,t,f,n)}else if(typeof r===\"number\"){r=r&255;if(typeof Uint8Array.prototype.indexOf===\"function\"){if(n){return Uint8Array.prototype.indexOf.call(e,r,t)}else{return Uint8Array.prototype.lastIndexOf.call(e,r,t)}}return arrayIndexOf(e,[r],t,f,n)}throw new TypeError(\"val must be string, number or Buffer\")}function arrayIndexOf(e,r,t,f,n){var i=1;var o=e.length;var u=r.length;if(f!==undefined){f=String(f).toLowerCase();if(f===\"ucs2\"||f===\"ucs-2\"||f===\"utf16le\"||f===\"utf-16le\"){if(e.length<2||r.length<2){return-1}i=2;o/=2;u/=2;t/=2}}function read(e,r){if(i===1){return e[r]}else{return e.readUInt16BE(r*i)}}var a;if(n){var s=-1;for(a=t;a<o;a++){if(read(e,a)===read(r,s===-1?0:a-s)){if(s===-1)s=a;if(a-s+1===u)return s*i}else{if(s!==-1)a-=a-s;s=-1}}}else{if(t+u>o)t=o-u;for(a=t;a>=0;a--){var h=true;for(var c=0;c<u;c++){if(read(e,a+c)!==read(r,c)){h=false;break}}if(h)return a}}return-1}Buffer.prototype.includes=function includes(e,r,t){return this.indexOf(e,r,t)!==-1};Buffer.prototype.indexOf=function indexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,false)};function hexWrite(e,r,t,f){t=Number(t)||0;var n=e.length-t;if(!f){f=n}else{f=Number(f);if(f>n){f=n}}var i=r.length;if(f>i/2){f=i/2}for(var o=0;o<f;++o){var u=parseInt(r.substr(o*2,2),16);if(numberIsNaN(u))return o;e[t+o]=u}return o}function utf8Write(e,r,t,f){return blitBuffer(utf8ToBytes(r,e.length-t),e,t,f)}function asciiWrite(e,r,t,f){return blitBuffer(asciiToBytes(r),e,t,f)}function latin1Write(e,r,t,f){return asciiWrite(e,r,t,f)}function base64Write(e,r,t,f){return blitBuffer(base64ToBytes(r),e,t,f)}function ucs2Write(e,r,t,f){return blitBuffer(utf16leToBytes(r,e.length-t),e,t,f)}Buffer.prototype.write=function write(e,r,t,f){if(r===undefined){f=\"utf8\";t=this.length;r=0}else if(t===undefined&&typeof r===\"string\"){f=r;t=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(t)){t=t>>>0;if(f===undefined)f=\"utf8\"}else{f=t;t=undefined}}else{throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\")}var n=this.length-r;if(t===undefined||t>n)t=n;if(e.length>0&&(t<0||r<0)||r>this.length){throw new RangeError(\"Attempt to write outside buffer bounds\")}if(!f)f=\"utf8\";var i=false;for(;;){switch(f){case\"hex\":return hexWrite(this,e,r,t);case\"utf8\":case\"utf-8\":return utf8Write(this,e,r,t);case\"ascii\":return asciiWrite(this,e,r,t);case\"latin1\":case\"binary\":return latin1Write(this,e,r,t);case\"base64\":return base64Write(this,e,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return ucs2Write(this,e,r,t);default:if(i)throw new TypeError(\"Unknown encoding: \"+f);f=(\"\"+f).toLowerCase();i=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,r,t){if(r===0&&t===e.length){return f.fromByteArray(e)}else{return f.fromByteArray(e.slice(r,t))}}function utf8Slice(e,r,t){t=Math.min(e.length,t);var f=[];var n=r;while(n<t){var i=e[n];var o=null;var u=i>239?4:i>223?3:i>191?2:1;if(n+u<=t){var a,s,h,c;switch(u){case 1:if(i<128){o=i}break;case 2:a=e[n+1];if((a&192)===128){c=(i&31)<<6|a&63;if(c>127){o=c}}break;case 3:a=e[n+1];s=e[n+2];if((a&192)===128&&(s&192)===128){c=(i&15)<<12|(a&63)<<6|s&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:a=e[n+1];s=e[n+2];h=e[n+3];if((a&192)===128&&(s&192)===128&&(h&192)===128){c=(i&15)<<18|(a&63)<<12|(s&63)<<6|h&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;u=1}else if(o>65535){o-=65536;f.push(o>>>10&1023|55296);o=56320|o&1023}f.push(o);n+=u}return decodeCodePointsArray(f)}var u=4096;function decodeCodePointsArray(e){var r=e.length;if(r<=u){return String.fromCharCode.apply(String,e)}var t=\"\";var f=0;while(f<r){t+=String.fromCharCode.apply(String,e.slice(f,f+=u))}return t}function asciiSlice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n]&127)}return f}function latin1Slice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n])}return f}function hexSlice(e,r,t){var f=e.length;if(!r||r<0)r=0;if(!t||t<0||t>f)t=f;var n=\"\";for(var i=r;i<t;++i){n+=s[e[i]]}return n}function utf16leSlice(e,r,t){var f=e.slice(r,t);var n=\"\";for(var i=0;i<f.length;i+=2){n+=String.fromCharCode(f[i]+f[i+1]*256)}return n}Buffer.prototype.slice=function slice(e,r){var t=this.length;e=~~e;r=r===undefined?t:~~r;if(e<0){e+=t;if(e<0)e=0}else if(e>t){e=t}if(r<0){r+=t;if(r<0)r=0}else if(r>t){r=t}if(r<e)r=e;var f=this.subarray(e,r);Object.setPrototypeOf(f,Buffer.prototype);return f};function checkOffset(e,r,t){if(e%1!==0||e<0)throw new RangeError(\"offset is not uint\");if(e+r>t)throw new RangeError(\"Trying to access beyond buffer length\")}Buffer.prototype.readUIntLE=function readUIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}return f};Buffer.prototype.readUIntBE=function readUIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t){checkOffset(e,r,this.length)}var f=this[e+--r];var n=1;while(r>0&&(n*=256)){f+=this[e+--r]*n}return f};Buffer.prototype.readUInt8=function readUInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);return this[e]};Buffer.prototype.readUInt16LE=function readUInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function readIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}n*=128;if(f>=n)f-=Math.pow(2,8*r);return f};Buffer.prototype.readIntBE=function readIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=r;var n=1;var i=this[e+--f];while(f>0&&(n*=256)){i+=this[e+--f]*n}n*=128;if(i>=n)i-=Math.pow(2,8*r);return i};Buffer.prototype.readInt8=function readInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e]|this[e+1]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt16BE=function readInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e+1]|this[e]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt32LE=function readInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function readFloatLE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,false,52,8)};function checkInt(e,r,t,f,n,i){if(!Buffer.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(r>n||r<i)throw new RangeError('\"value\" argument is out of bounds');if(t+f>e.length)throw new RangeError(\"Index out of range\")}Buffer.prototype.writeUIntLE=function writeUIntLE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=1;var o=0;this[r]=e&255;while(++o<t&&(i*=256)){this[r+o]=e/i&255}return r+t};Buffer.prototype.writeUIntBE=function writeUIntBE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=t-1;var o=1;this[r+i]=e&255;while(--i>=0&&(o*=256)){this[r+i]=e/o&255}return r+t};Buffer.prototype.writeUInt8=function writeUInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,255,0);this[r]=e&255;return r+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};Buffer.prototype.writeIntLE=function writeIntLE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=0;var o=1;var u=0;this[r]=e&255;while(++i<t&&(o*=256)){if(e<0&&u===0&&this[r+i-1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeIntBE=function writeIntBE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=t-1;var o=1;var u=0;this[r+i]=e&255;while(--i>=0&&(o*=256)){if(e<0&&u===0&&this[r+i+1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeInt8=function writeInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};Buffer.prototype.writeInt16LE=function writeInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeInt16BE=function writeInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeInt32LE=function writeInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};Buffer.prototype.writeInt32BE=function writeInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function checkIEEE754(e,r,t,f,n,i){if(t+f>e.length)throw new RangeError(\"Index out of range\");if(t<0)throw new RangeError(\"Index out of range\")}function writeFloat(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,4,34028234663852886e22,-34028234663852886e22)}n.write(e,r,t,f,23,4);return t+4}Buffer.prototype.writeFloatLE=function writeFloatLE(e,r,t){return writeFloat(this,e,r,true,t)};Buffer.prototype.writeFloatBE=function writeFloatBE(e,r,t){return writeFloat(this,e,r,false,t)};function writeDouble(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,8,17976931348623157e292,-17976931348623157e292)}n.write(e,r,t,f,52,8);return t+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,r,t){return writeDouble(this,e,r,true,t)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,r,t){return writeDouble(this,e,r,false,t)};Buffer.prototype.copy=function copy(e,r,t,f){if(!Buffer.isBuffer(e))throw new TypeError(\"argument should be a Buffer\");if(!t)t=0;if(!f&&f!==0)f=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(f>0&&f<t)f=t;if(f===t)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError(\"targetStart out of bounds\")}if(t<0||t>=this.length)throw new RangeError(\"Index out of range\");if(f<0)throw new RangeError(\"sourceEnd out of bounds\");if(f>this.length)f=this.length;if(e.length-r<f-t){f=e.length-r+t}var n=f-t;if(this===e&&typeof Uint8Array.prototype.copyWithin===\"function\"){this.copyWithin(r,t,f)}else if(this===e&&t<r&&r<f){for(var i=n-1;i>=0;--i){e[i+r]=this[i+t]}}else{Uint8Array.prototype.set.call(e,this.subarray(t,f),r)}return n};Buffer.prototype.fill=function fill(e,r,t,f){if(typeof e===\"string\"){if(typeof r===\"string\"){f=r;r=0;t=this.length}else if(typeof t===\"string\"){f=t;t=this.length}if(f!==undefined&&typeof f!==\"string\"){throw new TypeError(\"encoding must be a string\")}if(typeof f===\"string\"&&!Buffer.isEncoding(f)){throw new TypeError(\"Unknown encoding: \"+f)}if(e.length===1){var n=e.charCodeAt(0);if(f===\"utf8\"&&n<128||f===\"latin1\"){e=n}}}else if(typeof e===\"number\"){e=e&255}else if(typeof e===\"boolean\"){e=Number(e)}if(r<0||this.length<r||this.length<t){throw new RangeError(\"Out of range index\")}if(t<=r){return this}r=r>>>0;t=t===undefined?this.length:t>>>0;if(!e)e=0;var i;if(typeof e===\"number\"){for(i=r;i<t;++i){this[i]=e}}else{var o=Buffer.isBuffer(e)?e:Buffer.from(e,f);var u=o.length;if(u===0){throw new TypeError('The value \"'+e+'\" is invalid for argument \"value\"')}for(i=0;i<t-r;++i){this[i+r]=o[i%u]}}return this};var a=/[^+/0-9A-Za-z-_]/g;function base64clean(e){e=e.split(\"=\")[0];e=e.trim().replace(a,\"\");if(e.length<2)return\"\";while(e.length%4!==0){e=e+\"=\"}return e}function utf8ToBytes(e,r){r=r||Infinity;var t;var f=e.length;var n=null;var i=[];for(var o=0;o<f;++o){t=e.charCodeAt(o);if(t>55295&&t<57344){if(!n){if(t>56319){if((r-=3)>-1)i.push(239,191,189);continue}else if(o+1===f){if((r-=3)>-1)i.push(239,191,189);continue}n=t;continue}if(t<56320){if((r-=3)>-1)i.push(239,191,189);n=t;continue}t=(n-55296<<10|t-56320)+65536}else if(n){if((r-=3)>-1)i.push(239,191,189)}n=null;if(t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else{throw new Error(\"Invalid code point\")}}return i}function asciiToBytes(e){var r=[];for(var t=0;t<e.length;++t){r.push(e.charCodeAt(t)&255)}return r}function utf16leToBytes(e,r){var t,f,n;var i=[];for(var o=0;o<e.length;++o){if((r-=2)<0)break;t=e.charCodeAt(o);f=t>>8;n=t%256;i.push(n);i.push(f)}return i}function base64ToBytes(e){return f.toByteArray(base64clean(e))}function blitBuffer(e,r,t,f){for(var n=0;n<f;++n){if(n+t>=r.length||n>=e.length)break;r[n+t]=e[n]}return n}function isInstance(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function numberIsNaN(e){return e!==e}var s=function(){var e=\"0123456789abcdef\";var r=new Array(256);for(var t=0;t<16;++t){var f=t*16;for(var n=0;n<16;++n){r[f+n]=e[t]+e[n]}}return r}()},543:function(e,r){\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nr.read=function(e,r,t,f,n){var i,o;var u=n*8-f-1;var a=(1<<u)-1;var s=a>>1;var h=-7;var c=t?n-1:0;var l=t?-1:1;var p=e[r+c];c+=l;i=p&(1<<-h)-1;p>>=-h;h+=u;for(;h>0;i=i*256+e[r+c],c+=l,h-=8){}o=i&(1<<-h)-1;i>>=-h;h+=f;for(;h>0;o=o*256+e[r+c],c+=l,h-=8){}if(i===0){i=1-s}else if(i===a){return o?NaN:(p?-1:1)*Infinity}else{o=o+Math.pow(2,f);i=i-s}return(p?-1:1)*o*Math.pow(2,i-f)};r.write=function(e,r,t,f,n,i){var o,u,a;var s=i*8-n-1;var h=(1<<s)-1;var c=h>>1;var l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=f?0:i-1;var y=f?1:-1;var g=r<0||r===0&&1/r<0?1:0;r=Math.abs(r);if(isNaN(r)||r===Infinity){u=isNaN(r)?1:0;o=h}else{o=Math.floor(Math.log(r)/Math.LN2);if(r*(a=Math.pow(2,-o))<1){o--;a*=2}if(o+c>=1){r+=l/a}else{r+=l*Math.pow(2,1-c)}if(r*a>=2){o++;a/=2}if(o+c>=h){u=0;o=h}else if(o+c>=1){u=(r*a-1)*Math.pow(2,n);o=o+c}else{u=r*Math.pow(2,c-1)*Math.pow(2,n);o=0}}for(;n>=8;e[t+p]=u&255,p+=y,u/=256,n-=8){}o=o<<n|u;s+=n;for(;s>0;e[t+p]=o&255,p+=y,o/=256,s-=8){}e[t+p-y]|=g*128}}};var r={};function __nccwpck_require__(t){var f=r[t];if(f!==undefined){return f.exports}var n=r[t]={exports:{}};var i=true;try{e[t](n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete r[t]}return n.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var t=__nccwpck_require__(877);module.exports=t})();","var BufferBuilder = require('./bufferbuilder').BufferBuilder;\r\nvar binaryFeatures = require('./bufferbuilder').binaryFeatures;\r\n\r\nvar BinaryPack = {\r\n  unpack: function (data) {\r\n    var unpacker = new Unpacker(data);\r\n    return unpacker.unpack();\r\n  },\r\n  pack: function (data) {\r\n    var packer = new Packer();\r\n    packer.pack(data);\r\n    var buffer = packer.getBuffer();\r\n    return buffer;\r\n  }\r\n};\r\n\r\nmodule.exports = BinaryPack;\r\n\r\nfunction Unpacker (data) {\r\n  // Data is ArrayBuffer\r\n  this.index = 0;\r\n  this.dataBuffer = data;\r\n  this.dataView = new Uint8Array(this.dataBuffer);\r\n  this.length = this.dataBuffer.byteLength;\r\n}\r\n\r\nUnpacker.prototype.unpack = function () {\r\n  var type = this.unpack_uint8();\r\n  if (type < 0x80) {\r\n    return type;\r\n  } else if ((type ^ 0xe0) < 0x20) {\r\n    return (type ^ 0xe0) - 0x20;\r\n  }\r\n\r\n  var size;\r\n  if ((size = type ^ 0xa0) <= 0x0f) {\r\n    return this.unpack_raw(size);\r\n  } else if ((size = type ^ 0xb0) <= 0x0f) {\r\n    return this.unpack_string(size);\r\n  } else if ((size = type ^ 0x90) <= 0x0f) {\r\n    return this.unpack_array(size);\r\n  } else if ((size = type ^ 0x80) <= 0x0f) {\r\n    return this.unpack_map(size);\r\n  }\r\n\r\n  switch (type) {\r\n    case 0xc0:\r\n      return null;\r\n    case 0xc1:\r\n      return undefined;\r\n    case 0xc2:\r\n      return false;\r\n    case 0xc3:\r\n      return true;\r\n    case 0xca:\r\n      return this.unpack_float();\r\n    case 0xcb:\r\n      return this.unpack_double();\r\n    case 0xcc:\r\n      return this.unpack_uint8();\r\n    case 0xcd:\r\n      return this.unpack_uint16();\r\n    case 0xce:\r\n      return this.unpack_uint32();\r\n    case 0xcf:\r\n      return this.unpack_uint64();\r\n    case 0xd0:\r\n      return this.unpack_int8();\r\n    case 0xd1:\r\n      return this.unpack_int16();\r\n    case 0xd2:\r\n      return this.unpack_int32();\r\n    case 0xd3:\r\n      return this.unpack_int64();\r\n    case 0xd4:\r\n      return undefined;\r\n    case 0xd5:\r\n      return undefined;\r\n    case 0xd6:\r\n      return undefined;\r\n    case 0xd7:\r\n      return undefined;\r\n    case 0xd8:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_string(size);\r\n    case 0xd9:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_string(size);\r\n    case 0xda:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_raw(size);\r\n    case 0xdb:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_raw(size);\r\n    case 0xdc:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_array(size);\r\n    case 0xdd:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_array(size);\r\n    case 0xde:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_map(size);\r\n    case 0xdf:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_map(size);\r\n  }\r\n};\r\n\r\nUnpacker.prototype.unpack_uint8 = function () {\r\n  var byte = this.dataView[this.index] & 0xff;\r\n  this.index++;\r\n  return byte;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint16 = function () {\r\n  var bytes = this.read(2);\r\n  var uint16 =\r\n    ((bytes[0] & 0xff) * 256) + (bytes[1] & 0xff);\r\n  this.index += 2;\r\n  return uint16;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint32 = function () {\r\n  var bytes = this.read(4);\r\n  var uint32 =\r\n    ((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n    bytes[3];\r\n  this.index += 4;\r\n  return uint32;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint64 = function () {\r\n  var bytes = this.read(8);\r\n  var uint64 =\r\n    ((((((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n      bytes[3]) * 256 +\r\n      bytes[4]) * 256 +\r\n      bytes[5]) * 256 +\r\n      bytes[6]) * 256 +\r\n    bytes[7];\r\n  this.index += 8;\r\n  return uint64;\r\n};\r\n\r\nUnpacker.prototype.unpack_int8 = function () {\r\n  var uint8 = this.unpack_uint8();\r\n  return (uint8 < 0x80) ? uint8 : uint8 - (1 << 8);\r\n};\r\n\r\nUnpacker.prototype.unpack_int16 = function () {\r\n  var uint16 = this.unpack_uint16();\r\n  return (uint16 < 0x8000) ? uint16 : uint16 - (1 << 16);\r\n};\r\n\r\nUnpacker.prototype.unpack_int32 = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  return (uint32 < Math.pow(2, 31)) ? uint32\r\n    : uint32 - Math.pow(2, 32);\r\n};\r\n\r\nUnpacker.prototype.unpack_int64 = function () {\r\n  var uint64 = this.unpack_uint64();\r\n  return (uint64 < Math.pow(2, 63)) ? uint64\r\n    : uint64 - Math.pow(2, 64);\r\n};\r\n\r\nUnpacker.prototype.unpack_raw = function (size) {\r\n  if (this.length < this.index + size) {\r\n    throw new Error('BinaryPackFailure: index is out of range' +\r\n      ' ' + this.index + ' ' + size + ' ' + this.length);\r\n  }\r\n  var buf = this.dataBuffer.slice(this.index, this.index + size);\r\n  this.index += size;\r\n\r\n  // buf = util.bufferToString(buf);\r\n\r\n  return buf;\r\n};\r\n\r\nUnpacker.prototype.unpack_string = function (size) {\r\n  var bytes = this.read(size);\r\n  var i = 0;\r\n  var str = '';\r\n  var c;\r\n  var code;\r\n\r\n  while (i < size) {\r\n    c = bytes[i];\r\n    if (c < 128) {\r\n      str += String.fromCharCode(c);\r\n      i++;\r\n    } else if ((c ^ 0xc0) < 32) {\r\n      code = ((c ^ 0xc0) << 6) | (bytes[i + 1] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 2;\r\n    } else {\r\n      code = ((c & 15) << 12) | ((bytes[i + 1] & 63) << 6) |\r\n        (bytes[i + 2] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 3;\r\n    }\r\n  }\r\n\r\n  this.index += size;\r\n  return str;\r\n};\r\n\r\nUnpacker.prototype.unpack_array = function (size) {\r\n  var objects = new Array(size);\r\n  for (var i = 0; i < size; i++) {\r\n    objects[i] = this.unpack();\r\n  }\r\n  return objects;\r\n};\r\n\r\nUnpacker.prototype.unpack_map = function (size) {\r\n  var map = {};\r\n  for (var i = 0; i < size; i++) {\r\n    var key = this.unpack();\r\n    var value = this.unpack();\r\n    map[key] = value;\r\n  }\r\n  return map;\r\n};\r\n\r\nUnpacker.prototype.unpack_float = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  var sign = uint32 >> 31;\r\n  var exp = ((uint32 >> 23) & 0xff) - 127;\r\n  var fraction = (uint32 & 0x7fffff) | 0x800000;\r\n  return (sign === 0 ? 1 : -1) *\r\n    fraction * Math.pow(2, exp - 23);\r\n};\r\n\r\nUnpacker.prototype.unpack_double = function () {\r\n  var h32 = this.unpack_uint32();\r\n  var l32 = this.unpack_uint32();\r\n  var sign = h32 >> 31;\r\n  var exp = ((h32 >> 20) & 0x7ff) - 1023;\r\n  var hfrac = (h32 & 0xfffff) | 0x100000;\r\n  var frac = hfrac * Math.pow(2, exp - 20) +\r\n    l32 * Math.pow(2, exp - 52);\r\n  return (sign === 0 ? 1 : -1) * frac;\r\n};\r\n\r\nUnpacker.prototype.read = function (length) {\r\n  var j = this.index;\r\n  if (j + length <= this.length) {\r\n    return this.dataView.subarray(j, j + length);\r\n  } else {\r\n    throw new Error('BinaryPackFailure: read index out of range');\r\n  }\r\n};\r\n\r\nfunction Packer () {\r\n  this.bufferBuilder = new BufferBuilder();\r\n}\r\n\r\nPacker.prototype.getBuffer = function () {\r\n  return this.bufferBuilder.getBuffer();\r\n};\r\n\r\nPacker.prototype.pack = function (value) {\r\n  var type = typeof (value);\r\n  if (type === 'string') {\r\n    this.pack_string(value);\r\n  } else if (type === 'number') {\r\n    if (Math.floor(value) === value) {\r\n      this.pack_integer(value);\r\n    } else {\r\n      this.pack_double(value);\r\n    }\r\n  } else if (type === 'boolean') {\r\n    if (value === true) {\r\n      this.bufferBuilder.append(0xc3);\r\n    } else if (value === false) {\r\n      this.bufferBuilder.append(0xc2);\r\n    }\r\n  } else if (type === 'undefined') {\r\n    this.bufferBuilder.append(0xc0);\r\n  } else if (type === 'object') {\r\n    if (value === null) {\r\n      this.bufferBuilder.append(0xc0);\r\n    } else {\r\n      var constructor = value.constructor;\r\n      if (constructor == Array) {\r\n        this.pack_array(value);\r\n      } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\r\n        this.pack_bin(value);\r\n      } else if (constructor == ArrayBuffer) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value));\r\n        } else {\r\n          this.pack_bin(value);\r\n        }\r\n      } else if ('BYTES_PER_ELEMENT' in value) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value.buffer));\r\n        } else {\r\n          this.pack_bin(value.buffer);\r\n        }\r\n      } else if ((constructor == Object) || (constructor.toString().startsWith('class'))) {\r\n        this.pack_object(value);\r\n      } else if (constructor == Date) {\r\n        this.pack_string(value.toString());\r\n      } else if (typeof value.toBinaryPack === 'function') {\r\n        this.bufferBuilder.append(value.toBinaryPack());\r\n      } else {\r\n        throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error('Type \"' + type + '\" not yet supported');\r\n  }\r\n  this.bufferBuilder.flush();\r\n};\r\n\r\nPacker.prototype.pack_bin = function (blob) {\r\n  var length = blob.length || blob.byteLength || blob.size;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xa0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xda);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdb);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(blob);\r\n};\r\n\r\nPacker.prototype.pack_string = function (str) {\r\n  var length = utf8Length(str);\r\n\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xb0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xd8);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xd9);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(str);\r\n};\r\n\r\nPacker.prototype.pack_array = function (ary) {\r\n  var length = ary.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x90 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xdc);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdd);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var i = 0; i < length; i++) {\r\n    this.pack(ary[i]);\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_integer = function (num) {\r\n  if (num >= -0x20 && num <= 0x7f) {\r\n    this.bufferBuilder.append(num & 0xff);\r\n  } else if (num >= 0x00 && num <= 0xff) {\r\n    this.bufferBuilder.append(0xcc);\r\n    this.pack_uint8(num);\r\n  } else if (num >= -0x80 && num <= 0x7f) {\r\n    this.bufferBuilder.append(0xd0);\r\n    this.pack_int8(num);\r\n  } else if (num >= 0x0000 && num <= 0xffff) {\r\n    this.bufferBuilder.append(0xcd);\r\n    this.pack_uint16(num);\r\n  } else if (num >= -0x8000 && num <= 0x7fff) {\r\n    this.bufferBuilder.append(0xd1);\r\n    this.pack_int16(num);\r\n  } else if (num >= 0x00000000 && num <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xce);\r\n    this.pack_uint32(num);\r\n  } else if (num >= -0x80000000 && num <= 0x7fffffff) {\r\n    this.bufferBuilder.append(0xd2);\r\n    this.pack_int32(num);\r\n  } else if (num >= -0x8000000000000000 && num <= 0x7FFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xd3);\r\n    this.pack_int64(num);\r\n  } else if (num >= 0x0000000000000000 && num <= 0xFFFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xcf);\r\n    this.pack_uint64(num);\r\n  } else {\r\n    throw new Error('Invalid integer');\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_double = function (num) {\r\n  var sign = 0;\r\n  if (num < 0) {\r\n    sign = 1;\r\n    num = -num;\r\n  }\r\n  var exp = Math.floor(Math.log(num) / Math.LN2);\r\n  var frac0 = num / Math.pow(2, exp) - 1;\r\n  var frac1 = Math.floor(frac0 * Math.pow(2, 52));\r\n  var b32 = Math.pow(2, 32);\r\n  var h32 = (sign << 31) | ((exp + 1023) << 20) |\r\n    (frac1 / b32) & 0x0fffff;\r\n  var l32 = frac1 % b32;\r\n  this.bufferBuilder.append(0xcb);\r\n  this.pack_int32(h32);\r\n  this.pack_int32(l32);\r\n};\r\n\r\nPacker.prototype.pack_object = function (obj) {\r\n  var keys = Object.keys(obj);\r\n  var length = keys.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x80 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xde);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdf);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      this.pack(prop);\r\n      this.pack(obj[prop]);\r\n    }\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_uint8 = function (num) {\r\n  this.bufferBuilder.append(num);\r\n};\r\n\r\nPacker.prototype.pack_uint16 = function (num) {\r\n  this.bufferBuilder.append(num >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_uint32 = function (num) {\r\n  var n = num & 0xffffffff;\r\n  this.bufferBuilder.append((n & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((n & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((n & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((n & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_uint64 = function (num) {\r\n  var high = num / Math.pow(2, 32);\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int8 = function (num) {\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int16 = function (num) {\r\n  this.bufferBuilder.append((num & 0xff00) >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int32 = function (num) {\r\n  this.bufferBuilder.append((num >>> 24) & 0xff);\r\n  this.bufferBuilder.append((num & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((num & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((num & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int64 = function (num) {\r\n  var high = Math.floor(num / Math.pow(2, 32));\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nfunction _utf8Replace (m) {\r\n  var code = m.charCodeAt(0);\r\n\r\n  if (code <= 0x7ff) return '00';\r\n  if (code <= 0xffff) return '000';\r\n  if (code <= 0x1fffff) return '0000';\r\n  if (code <= 0x3ffffff) return '00000';\r\n  return '000000';\r\n}\r\n\r\nfunction utf8Length (str) {\r\n  if (str.length > 600) {\r\n    // Blob method faster for large strings\r\n    return (new Blob([str])).size;\r\n  } else {\r\n    return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\r\n  }\r\n}\r\n","var binaryFeatures = {};\r\nbinaryFeatures.useBlobBuilder = (function () {\r\n  try {\r\n    new Blob([]);\r\n    return false;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nbinaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && (function () {\r\n  try {\r\n    return (new Blob([new Uint8Array([])])).size === 0;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nmodule.exports.binaryFeatures = binaryFeatures;\r\nvar BlobBuilder = module.exports.BlobBuilder;\r\nif (typeof window !== 'undefined') {\r\n  BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder ||\r\n    window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\r\n}\r\n\r\nfunction BufferBuilder () {\r\n  this._pieces = [];\r\n  this._parts = [];\r\n}\r\n\r\nBufferBuilder.prototype.append = function (data) {\r\n  if (typeof data === 'number') {\r\n    this._pieces.push(data);\r\n  } else {\r\n    this.flush();\r\n    this._parts.push(data);\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.flush = function () {\r\n  if (this._pieces.length > 0) {\r\n    var buf = new Uint8Array(this._pieces);\r\n    if (!binaryFeatures.useArrayBufferView) {\r\n      buf = buf.buffer;\r\n    }\r\n    this._parts.push(buf);\r\n    this._pieces = [];\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.getBuffer = function () {\r\n  this.flush();\r\n  if (binaryFeatures.useBlobBuilder) {\r\n    var builder = new BlobBuilder();\r\n    for (var i = 0, ii = this._parts.length; i < ii; i++) {\r\n      builder.append(this._parts[i]);\r\n    }\r\n    return builder.getBlob();\r\n  } else {\r\n    return new Blob(this._parts);\r\n  }\r\n};\r\n\r\nmodule.exports.BufferBuilder = BufferBuilder;\r\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","\"use strict\";\n/**\n * Hack for the peerjs compilation on angular\n * About this issue: https://github.com/peers/peerjs/issues/552\n */\n// @ts-ignore\ntypeof window !== \"undefined\" && (window.parcelRequire = window.parcelRequire || undefined);\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexport default decodePacket;\n","import encodePacket from \"./encodePacket.js\";\nimport decodePacket from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nclass TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.readyState = \"\";\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @api protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n    open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n            this.readyState = \"opening\";\n            this.doOpen();\n        }\n        return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api public\n     */\n    close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api public\n     */\n    send(packets) {\n        if (\"open\" === this.readyState) {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @api protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @api protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { XHR as XMLHttpRequest } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    /**\n     * Transport name.\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n    onData(data) {\n        const callback = packet => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, data => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @api private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n    create() {\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return cb => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = closeEvent => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent\n        });\n        this.ws.onmessage = ev => this.onData(ev.data);\n        this.ws.onerror = e => this.onError(\"websocket error\", e);\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, data => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nexport const transports = {\n    websocket: WS,\n    polling: Polling\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    constructor(uri, opts = {}) {\n        super();\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.readyState = \"\";\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true\n        }, opts);\n        this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                addEventListener(\"beforeunload\", () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                }, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\"\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port\n        });\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", reason => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", msg => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = err => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState &&\n            this.opts.upgrade &&\n            this.transport.pause) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @api private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api public\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.connected = false;\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        const timeout = this.flags.timeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        this.id = id;\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * ```\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     * ```\n     *\n     * @returns self\n     * @public\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(event);\n     * });\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(event);\n     * });\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * const handler = (event, ...args) => {\n     *   console.log(event);\n     * }\n     *\n     * socket.onAnyOutgoing(handler);\n     *\n     * // then later\n     * socket.offAnyOutgoing(handler);\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on(socket, \"error\", (err) => {\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        this.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      let urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window, browserDetails);\n      edgeShim.shimGetDisplayMedia(window, browserDetails);\n      edgeShim.shimPeerConnection(window, browserDetails);\n      edgeShim.shimReplaceTrack(window, browserDetails);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","import $kKvpS$peerjsjsbinarypack from \"peerjs-js-binarypack\";\nimport $kKvpS$webrtcadapter from \"webrtc-adapter\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n\nvar $af8cf1f663f490f4$var$webRTCAdapter = //@ts-ignore\n$kKvpS$webrtcadapter.default || $kKvpS$webrtcadapter;\nvar $af8cf1f663f490f4$export$25be9502477c137d = new /** @class */ (function() {\n    function class_1() {\n        this.isIOS = [\n            \"iPad\",\n            \"iPhone\",\n            \"iPod\"\n        ].includes(navigator.platform);\n        this.supportedBrowsers = [\n            \"firefox\",\n            \"chrome\",\n            \"safari\"\n        ];\n        this.minFirefoxVersion = 59;\n        this.minChromeVersion = 72;\n        this.minSafariVersion = 605;\n    }\n    class_1.prototype.isWebRTCSupported = function() {\n        return typeof RTCPeerConnection !== \"undefined\";\n    };\n    class_1.prototype.isBrowserSupported = function() {\n        var browser = this.getBrowser();\n        var version = this.getVersion();\n        var validBrowser = this.supportedBrowsers.includes(browser);\n        if (!validBrowser) return false;\n        if (browser === \"chrome\") return version >= this.minChromeVersion;\n        if (browser === \"firefox\") return version >= this.minFirefoxVersion;\n        if (browser === \"safari\") return !this.isIOS && version >= this.minSafariVersion;\n        return false;\n    };\n    class_1.prototype.getBrowser = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser;\n    };\n    class_1.prototype.getVersion = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n    };\n    class_1.prototype.isUnifiedPlanSupported = function() {\n        var browser = this.getBrowser();\n        var version = $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n        if (browser === \"chrome\" && version < this.minChromeVersion) return false;\n        if (browser === \"firefox\" && version >= this.minFirefoxVersion) return true;\n        if (!window.RTCRtpTransceiver || !(\"currentDirection\" in RTCRtpTransceiver.prototype)) return false;\n        var tempPc;\n        var supported = false;\n        try {\n            tempPc = new RTCPeerConnection();\n            tempPc.addTransceiver(\"audio\");\n            supported = true;\n        } catch (e) {} finally{\n            if (tempPc) tempPc.close();\n        }\n        return supported;\n    };\n    class_1.prototype.toString = function() {\n        return \"Supports:\\n    browser:\".concat(this.getBrowser(), \"\\n    version:\").concat(this.getVersion(), \"\\n    isIOS:\").concat(this.isIOS, \"\\n    isWebRTCSupported:\").concat(this.isWebRTCSupported(), \"\\n    isBrowserSupported:\").concat(this.isBrowserSupported(), \"\\n    isUnifiedPlanSupported:\").concat(this.isUnifiedPlanSupported());\n    };\n    return class_1;\n}())();\n\n\nvar $06cb531ed7840f78$var$DEFAULT_CONFIG = {\n    iceServers: [\n        {\n            urls: \"stun:stun.l.google.com:19302\"\n        },\n        {\n            urls: [\n                \"turn:eu-0.turn.peerjs.com:3478\",\n                \"turn:us-0.turn.peerjs.com:3478\", \n            ],\n            username: \"peerjs\",\n            credential: \"peerjsp\"\n        }, \n    ],\n    sdpSemantics: \"unified-plan\"\n};\nvar $06cb531ed7840f78$var$Util = /** @class */ function() {\n    function Util() {\n        this.CLOUD_HOST = \"0.peerjs.com\";\n        this.CLOUD_PORT = 443;\n        // Browsers that need chunking:\n        this.chunkedBrowsers = {\n            Chrome: 1,\n            chrome: 1\n        };\n        this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n        // Returns browser-agnostic default config\n        this.defaultConfig = $06cb531ed7840f78$var$DEFAULT_CONFIG;\n        this.browser = $af8cf1f663f490f4$export$25be9502477c137d.getBrowser();\n        this.browserVersion = $af8cf1f663f490f4$export$25be9502477c137d.getVersion();\n        // Lists which features are supported\n        this.supports = function() {\n            var supported = {\n                browser: $af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),\n                webRTC: $af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),\n                audioVideo: false,\n                data: false,\n                binaryBlob: false,\n                reliable: false\n            };\n            if (!supported.webRTC) return supported;\n            var pc;\n            try {\n                pc = new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG);\n                supported.audioVideo = true;\n                var dc = void 0;\n                try {\n                    dc = pc.createDataChannel(\"_PEERJSTEST\", {\n                        ordered: true\n                    });\n                    supported.data = true;\n                    supported.reliable = !!dc.ordered;\n                    // Binary test\n                    try {\n                        dc.binaryType = \"blob\";\n                        supported.binaryBlob = !$af8cf1f663f490f4$export$25be9502477c137d.isIOS;\n                    } catch (e) {}\n                } catch (e) {} finally{\n                    if (dc) dc.close();\n                }\n            } catch (e) {} finally{\n                if (pc) pc.close();\n            }\n            return supported;\n        }();\n        this.pack = $kKvpS$peerjsjsbinarypack.pack;\n        this.unpack = $kKvpS$peerjsjsbinarypack.unpack;\n        // Binary stuff\n        this._dataCount = 1;\n    }\n    Util.prototype.noop = function() {};\n    // Ensure alphanumeric ids\n    Util.prototype.validateId = function(id) {\n        // Allow empty ids\n        return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n    };\n    Util.prototype.chunk = function(blob) {\n        var chunks = [];\n        var size = blob.size;\n        var total = Math.ceil(size / $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n        var index = 0;\n        var start = 0;\n        while(start < size){\n            var end = Math.min(size, start + $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n            var b = blob.slice(start, end);\n            var chunk = {\n                __peerData: this._dataCount,\n                n: index,\n                data: b,\n                total: total\n            };\n            chunks.push(chunk);\n            start = end;\n            index++;\n        }\n        this._dataCount++;\n        return chunks;\n    };\n    Util.prototype.blobToArrayBuffer = function(blob, cb) {\n        var fr = new FileReader();\n        fr.onload = function(evt) {\n            if (evt.target) cb(evt.target.result);\n        };\n        fr.readAsArrayBuffer(blob);\n        return fr;\n    };\n    Util.prototype.binaryStringToArrayBuffer = function(binary) {\n        var byteArray = new Uint8Array(binary.length);\n        for(var i = 0; i < binary.length; i++)byteArray[i] = binary.charCodeAt(i) & 0xff;\n        return byteArray.buffer;\n    };\n    Util.prototype.randomToken = function() {\n        return Math.random().toString(36).slice(2);\n    };\n    Util.prototype.isSecure = function() {\n        return location.protocol === \"https:\";\n    };\n    return Util;\n}();\nvar $06cb531ed7840f78$export$7debb50ef11d5e0b = new $06cb531ed7840f78$var$Util();\n\n\nvar $26088d7da5b03f69$exports = {};\n\n$parcel$export($26088d7da5b03f69$exports, \"Peer\", () => $26088d7da5b03f69$export$ecd1fc136c422448, (v) => $26088d7da5b03f69$export$ecd1fc136c422448 = v);\nvar $ac9b757d51178e15$exports = {};\n'use strict';\nvar $ac9b757d51178e15$var$has = Object.prototype.hasOwnProperty, $ac9b757d51178e15$var$prefix = '~';\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$Events() {}\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n    $ac9b757d51178e15$var$Events.prototype = Object.create(null);\n    //\n    // This hack is needed because the `__proto__` property is still inherited in\n    // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n    //\n    if (!new $ac9b757d51178e15$var$Events().__proto__) $ac9b757d51178e15$var$prefix = false;\n}\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$EE(fn, context, once) {\n    this.fn = fn;\n    this.context = context;\n    this.once = once || false;\n}\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */ function $ac9b757d51178e15$var$addListener(emitter, event, fn, context, once) {\n    if (typeof fn !== 'function') throw new TypeError('The listener must be a function');\n    var listener = new $ac9b757d51178e15$var$EE(fn, context || emitter, once), evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n    else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n    else emitter._events[evt] = [\n        emitter._events[evt],\n        listener\n    ];\n    return emitter;\n}\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */ function $ac9b757d51178e15$var$clearEvent(emitter, evt) {\n    if (--emitter._eventsCount === 0) emitter._events = new $ac9b757d51178e15$var$Events();\n    else delete emitter._events[evt];\n}\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */ function $ac9b757d51178e15$var$EventEmitter() {\n    this._events = new $ac9b757d51178e15$var$Events();\n    this._eventsCount = 0;\n}\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.eventNames = function eventNames() {\n    var names = [], events, name;\n    if (this._eventsCount === 0) return names;\n    for(name in events = this._events)if ($ac9b757d51178e15$var$has.call(events, name)) names.push($ac9b757d51178e15$var$prefix ? name.slice(1) : name);\n    if (Object.getOwnPropertySymbols) return names.concat(Object.getOwnPropertySymbols(events));\n    return names;\n};\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listeners = function listeners(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, handlers = this._events[evt];\n    if (!handlers) return [];\n    if (handlers.fn) return [\n        handlers.fn\n    ];\n    for(var i = 0, l = handlers.length, ee = new Array(l); i < l; i++)ee[i] = handlers[i].fn;\n    return ee;\n};\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listenerCount = function listenerCount(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, listeners = this._events[evt];\n    if (!listeners) return 0;\n    if (listeners.fn) return 1;\n    return listeners.length;\n};\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return false;\n    var listeners = this._events[evt], len = arguments.length, args, i;\n    if (listeners.fn) {\n        if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n        switch(len){\n            case 1:\n                return listeners.fn.call(listeners.context), true;\n            case 2:\n                return listeners.fn.call(listeners.context, a1), true;\n            case 3:\n                return listeners.fn.call(listeners.context, a1, a2), true;\n            case 4:\n                return listeners.fn.call(listeners.context, a1, a2, a3), true;\n            case 5:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n            case 6:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for(i = 1, args = new Array(len - 1); i < len; i++)args[i - 1] = arguments[i];\n        listeners.fn.apply(listeners.context, args);\n    } else {\n        var length = listeners.length, j;\n        for(i = 0; i < length; i++){\n            if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n            switch(len){\n                case 1:\n                    listeners[i].fn.call(listeners[i].context);\n                    break;\n                case 2:\n                    listeners[i].fn.call(listeners[i].context, a1);\n                    break;\n                case 3:\n                    listeners[i].fn.call(listeners[i].context, a1, a2);\n                    break;\n                case 4:\n                    listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n                    break;\n                default:\n                    if (!args) for(j = 1, args = new Array(len - 1); j < len; j++)args[j - 1] = arguments[j];\n                    listeners[i].fn.apply(listeners[i].context, args);\n            }\n        }\n    }\n    return true;\n};\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.on = function on(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, false);\n};\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.once = function once(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, true);\n};\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return this;\n    if (!fn) {\n        $ac9b757d51178e15$var$clearEvent(this, evt);\n        return this;\n    }\n    var listeners = this._events[evt];\n    if (listeners.fn) {\n        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        for(var i = 0, events = [], length = listeners.length; i < length; i++)if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) events.push(listeners[i]);\n        //\n        // Reset the array, or remove it completely if we have no more listeners.\n        //\n        if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n        else $ac9b757d51178e15$var$clearEvent(this, evt);\n    }\n    return this;\n};\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n    var evt;\n    if (event) {\n        evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n        if (this._events[evt]) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        this._events = new $ac9b757d51178e15$var$Events();\n        this._eventsCount = 0;\n    }\n    return this;\n};\n//\n// Alias methods names because people roll like that.\n//\n$ac9b757d51178e15$var$EventEmitter.prototype.off = $ac9b757d51178e15$var$EventEmitter.prototype.removeListener;\n$ac9b757d51178e15$var$EventEmitter.prototype.addListener = $ac9b757d51178e15$var$EventEmitter.prototype.on;\n//\n// Expose the prefix.\n//\n$ac9b757d51178e15$var$EventEmitter.prefixed = $ac9b757d51178e15$var$prefix;\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\n$ac9b757d51178e15$var$EventEmitter.EventEmitter = $ac9b757d51178e15$var$EventEmitter;\n$ac9b757d51178e15$exports = $ac9b757d51178e15$var$EventEmitter;\n\n\n\nvar $1615705ecc6adca3$exports = {};\n\n$parcel$export($1615705ecc6adca3$exports, \"LogLevel\", () => $1615705ecc6adca3$export$243e62d78d3b544d, (v) => $1615705ecc6adca3$export$243e62d78d3b544d = v);\n$parcel$export($1615705ecc6adca3$exports, \"default\", () => $1615705ecc6adca3$export$2e2bcd8739ae039, (v) => $1615705ecc6adca3$export$2e2bcd8739ae039 = v);\nvar $1615705ecc6adca3$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $1615705ecc6adca3$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $1615705ecc6adca3$var$LOG_PREFIX = \"PeerJS: \";\nvar $1615705ecc6adca3$export$243e62d78d3b544d;\n(function($1615705ecc6adca3$export$243e62d78d3b544d) {\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Disabled\"] = 0] = \"Disabled\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Errors\"] = 1] = \"Errors\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Warnings\"] = 2] = \"Warnings\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"All\"] = 3] = \"All\";\n})($1615705ecc6adca3$export$243e62d78d3b544d || ($1615705ecc6adca3$export$243e62d78d3b544d = {}));\nvar $1615705ecc6adca3$var$Logger = /** @class */ function() {\n    function Logger() {\n        this._logLevel = $1615705ecc6adca3$export$243e62d78d3b544d.Disabled;\n    }\n    Object.defineProperty(Logger.prototype, \"logLevel\", {\n        get: function() {\n            return this._logLevel;\n        },\n        set: function(logLevel) {\n            this._logLevel = logLevel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Logger.prototype.log = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.All\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.warn = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Warnings\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.error = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Errors\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.setLogFunction = function(fn) {\n        this._print = fn;\n    };\n    Logger.prototype._print = function(logLevel) {\n        var rest = [];\n        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];\n        var copy = $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$var$LOG_PREFIX\n        ], $1615705ecc6adca3$var$__read(rest), false);\n        for(var i in copy)if (copy[i] instanceof Error) copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n        if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) console.log.apply(console, $1615705ecc6adca3$var$__spreadArray([], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) console.warn.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"WARNING\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) console.error.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"ERROR\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n    };\n    return Logger;\n}();\nvar $1615705ecc6adca3$export$2e2bcd8739ae039 = new $1615705ecc6adca3$var$Logger();\n\n\nvar $31d11a8d122cb4b7$exports = {};\n\n$parcel$export($31d11a8d122cb4b7$exports, \"Socket\", () => $31d11a8d122cb4b7$export$4798917dbf149b79, (v) => $31d11a8d122cb4b7$export$4798917dbf149b79 = v);\n\n\nvar $60fadef21a2daafc$export$3157d57b4135e3bc;\n(function($60fadef21a2daafc$export$3157d57b4135e3bc) {\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Data\"] = \"data\";\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Media\"] = \"media\";\n})($60fadef21a2daafc$export$3157d57b4135e3bc || ($60fadef21a2daafc$export$3157d57b4135e3bc = {}));\nvar $60fadef21a2daafc$export$9547aaa2e39030ff;\n(function($60fadef21a2daafc$export$9547aaa2e39030ff) {\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"BrowserIncompatible\"] = \"browser-incompatible\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidID\"] = \"invalid-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidKey\"] = \"invalid-key\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Network\"] = \"network\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"PeerUnavailable\"] = \"peer-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SslUnavailable\"] = \"ssl-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"ServerError\"] = \"server-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketError\"] = \"socket-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketClosed\"] = \"socket-closed\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"UnavailableID\"] = \"unavailable-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"WebRTC\"] = \"webrtc\";\n})($60fadef21a2daafc$export$9547aaa2e39030ff || ($60fadef21a2daafc$export$9547aaa2e39030ff = {}));\nvar $60fadef21a2daafc$export$89f507cf986a947;\n(function($60fadef21a2daafc$export$89f507cf986a947) {\n    $60fadef21a2daafc$export$89f507cf986a947[\"Binary\"] = \"binary\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"BinaryUTF8\"] = \"binary-utf8\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"JSON\"] = \"json\";\n})($60fadef21a2daafc$export$89f507cf986a947 || ($60fadef21a2daafc$export$89f507cf986a947 = {}));\nvar $60fadef21a2daafc$export$3b5c4a4b6354f023;\n(function($60fadef21a2daafc$export$3b5c4a4b6354f023) {\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Message\"] = \"message\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Error\"] = \"error\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Close\"] = \"close\";\n})($60fadef21a2daafc$export$3b5c4a4b6354f023 || ($60fadef21a2daafc$export$3b5c4a4b6354f023 = {}));\nvar $60fadef21a2daafc$export$adb4a1754da6f10d;\n(function($60fadef21a2daafc$export$adb4a1754da6f10d) {\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Heartbeat\"] = \"HEARTBEAT\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Candidate\"] = \"CANDIDATE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Offer\"] = \"OFFER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Answer\"] = \"ANSWER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Open\"] = \"OPEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Error\"] = \"ERROR\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"IdTaken\"] = \"ID-TAKEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"InvalidKey\"] = \"INVALID-KEY\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Leave\"] = \"LEAVE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Expire\"] = \"EXPIRE\";\n})($60fadef21a2daafc$export$adb4a1754da6f10d || ($60fadef21a2daafc$export$adb4a1754da6f10d = {}));\n\n\nvar $0d1ed891c5cb27c0$exports = {};\n$0d1ed891c5cb27c0$exports = JSON.parse(\"{\\\"name\\\":\\\"peerjs\\\",\\\"version\\\":\\\"1.4.6\\\",\\\"keywords\\\":[\\\"peerjs\\\",\\\"webrtc\\\",\\\"p2p\\\",\\\"rtc\\\"],\\\"description\\\":\\\"PeerJS client\\\",\\\"homepage\\\":\\\"https://peerjs.com\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/peers/peerjs/issues\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"https://github.com/peers/peerjs\\\"},\\\"license\\\":\\\"MIT\\\",\\\"contributors\\\":[\\\"Michelle Bu <michelle@michellebu.com>\\\",\\\"afrokick <devbyru@gmail.com>\\\",\\\"ericz <really.ez@gmail.com>\\\",\\\"Jairo <kidandcat@gmail.com>\\\",\\\"Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>\\\",\\\"Jairo Caro-Accino Viciana <jairo@galax.be>\\\",\\\"Carlos Caballero <carlos.caballero.gonzalez@gmail.com>\\\",\\\"hc <hheennrryy@gmail.com>\\\",\\\"Muhammad Asif <capripio@gmail.com>\\\",\\\"PrashoonB <prashoonbhattacharjee@gmail.com>\\\",\\\"Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>\\\",\\\"akotynski <aleksanderkotbury@gmail.com>\\\",\\\"lmb <i@lmb.io>\\\",\\\"Jairooo <jairocaro@msn.com>\\\",\\\"Moritz Stückler <moritz.stueckler@gmail.com>\\\",\\\"Simon <crydotsnakegithub@gmail.com>\\\",\\\"Denis Lukov <denismassters@gmail.com>\\\",\\\"Philipp Hancke <fippo@andyet.net>\\\",\\\"Hans Oksendahl <hansoksendahl@gmail.com>\\\",\\\"Jess <jessachandler@gmail.com>\\\",\\\"khankuan <khankuan@gmail.com>\\\",\\\"DUODVK <kurmanov.work@gmail.com>\\\",\\\"XiZhao <kwang1imsa@gmail.com>\\\",\\\"Matthias Lohr <matthias@lohr.me>\\\",\\\"=frank tree <=frnktrb@googlemail.com>\\\",\\\"Andre Eckardt <aeckardt@outlook.com>\\\",\\\"Chris Cowan <agentme49@gmail.com>\\\",\\\"Alex Chuev <alex@chuev.com>\\\",\\\"alxnull <alxnull@e.mail.de>\\\",\\\"Yemel Jardi <angel.jardi@gmail.com>\\\",\\\"Ben Parnell <benjaminparnell.94@gmail.com>\\\",\\\"Benny Lichtner <bennlich@gmail.com>\\\",\\\"fresheneesz <bitetrudpublic@gmail.com>\\\",\\\"bob.barstead@exaptive.com <bob.barstead@exaptive.com>\\\",\\\"chandika <chandika@gmail.com>\\\",\\\"emersion <contact@emersion.fr>\\\",\\\"Christopher Van <cvan@users.noreply.github.com>\\\",\\\"eddieherm <edhermoso@gmail.com>\\\",\\\"Eduardo Pinho <enet4mikeenet@gmail.com>\\\",\\\"Evandro Zanatta <ezanatta@tray.net.br>\\\",\\\"Gardner Bickford <gardner@users.noreply.github.com>\\\",\\\"Gian Luca <gianluca.cecchi@cynny.com>\\\",\\\"PatrickJS <github@gdi2290.com>\\\",\\\"jonnyf <github@jonathanfoss.co.uk>\\\",\\\"Hizkia Felix <hizkifw@gmail.com>\\\",\\\"Hristo Oskov <hristo.oskov@gmail.com>\\\",\\\"Isaac Madwed <i.madwed@gmail.com>\\\",\\\"Ilya Konanykhin <ilya.konanykhin@gmail.com>\\\",\\\"jasonbarry <jasbarry@me.com>\\\",\\\"Jonathan Burke <jonathan.burke.1311@googlemail.com>\\\",\\\"Josh Hamit <josh.hamit@gmail.com>\\\",\\\"Jordan Austin <jrax86@gmail.com>\\\",\\\"Joel Wetzell <jwetzell@yahoo.com>\\\",\\\"xizhao <kevin.wang@cloudera.com>\\\",\\\"Alberto Torres <kungfoobar@gmail.com>\\\",\\\"Jonathan Mayol <mayoljonathan@gmail.com>\\\",\\\"Jefferson Felix <me@jsfelix.dev>\\\",\\\"Rolf Erik Lekang <me@rolflekang.com>\\\",\\\"Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>\\\",\\\"Pepijn de Vos <pepijndevos@gmail.com>\\\",\\\"JooYoung <qkdlql@naver.com>\\\",\\\"Tobias Speicher <rootcommander@gmail.com>\\\",\\\"Steve Blaurock <sblaurock@gmail.com>\\\",\\\"Kyrylo Shegeda <shegeda@ualberta.ca>\\\",\\\"Diwank Singh Tomer <singh@diwank.name>\\\",\\\"Sören Balko <Soeren.Balko@gmail.com>\\\",\\\"Arpit Solanki <solankiarpit1997@gmail.com>\\\",\\\"Yuki Ito <yuki@gnnk.net>\\\",\\\"Artur Zayats <zag2art@gmail.com>\\\"],\\\"funding\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"collective\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"files\\\":[\\\"dist/*\\\"],\\\"type\\\":\\\"module\\\",\\\"sideEffects\\\":[\\\"lib/global.ts\\\",\\\"lib/supports.ts\\\"],\\\"main\\\":\\\"dist/bundler.cjs\\\",\\\"module\\\":\\\"dist/bundler.mjs\\\",\\\"browser-minified\\\":\\\"dist/peerjs.min.cjs\\\",\\\"browser-unminified\\\":\\\"dist/peerjs.cjs\\\",\\\"types\\\":\\\"dist/types.d.ts\\\",\\\"engines\\\":{\\\"node\\\":\\\">= 10\\\"},\\\"targets\\\":{\\\"types\\\":{\\\"source\\\":\\\"lib/exports.ts\\\"},\\\"main\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"module\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"includeNodeModules\\\":[\\\"eventemitter3\\\"],\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"browser-minified\\\":{\\\"includeNodeModules\\\":true,\\\"context\\\":\\\"browser\\\",\\\"optimize\\\":true,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"},\\\"browser-unminified\\\":{\\\"includeNodeModules\\\":true,\\\"context\\\":\\\"browser\\\",\\\"optimize\\\":false,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"}},\\\"scripts\\\":{\\\"contributors\\\":\\\"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\\\\\\"chore(contributors): update and sort contributors list\\\\\\\"\\\",\\\"check\\\":\\\"tsc --noEmit\\\",\\\"watch\\\":\\\"parcel watch\\\",\\\"build\\\":\\\"rm -rf dist && parcel build && cp dist/peerjs.cjs dist/peerjs.js && cp dist/peerjs.min.cjs dist/peerjs.min.js\\\",\\\"prepublishOnly\\\":\\\"npm run build\\\",\\\"test\\\":\\\"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts\\\",\\\"format\\\":\\\"prettier --write .\\\",\\\"semantic-release\\\":\\\"semantic-release\\\"},\\\"devDependencies\\\":{\\\"@parcel/config-default\\\":\\\"^2.5.0\\\",\\\"@parcel/packager-ts\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-tsc\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-types\\\":\\\"^2.5.0\\\",\\\"@semantic-release/changelog\\\":\\\"^6.0.1\\\",\\\"@semantic-release/git\\\":\\\"^10.0.1\\\",\\\"@types/chai\\\":\\\"^4.3.0\\\",\\\"@types/mocha\\\":\\\"^9.1.0\\\",\\\"@types/node\\\":\\\"^17.0.18\\\",\\\"chai\\\":\\\"^4.3.6\\\",\\\"git-authors-cli\\\":\\\"^1.0.40\\\",\\\"jsdom\\\":\\\"^19.0.0\\\",\\\"jsdom-global\\\":\\\"^3.0.2\\\",\\\"mocha\\\":\\\"^9.2.0\\\",\\\"mock-socket\\\":\\\"8.0.5\\\",\\\"parcel\\\":\\\"^2.5.0\\\",\\\"parcel-transformer-tsc-sourcemaps\\\":\\\"^1.0.2\\\",\\\"prettier\\\":\\\"^2.6.2\\\",\\\"semantic-release\\\":\\\"^19.0.2\\\",\\\"standard\\\":\\\"^16.0.4\\\",\\\"ts-node\\\":\\\"^10.5.0\\\",\\\"typescript\\\":\\\"^4.5.5\\\"},\\\"dependencies\\\":{\\\"@swc/helpers\\\":\\\"^0.3.13\\\",\\\"eventemitter3\\\":\\\"^4.0.7\\\",\\\"peerjs-js-binarypack\\\":\\\"1.0.1\\\",\\\"webrtc-adapter\\\":\\\"^7.7.1\\\"}}\");\n\n\nvar $31d11a8d122cb4b7$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $31d11a8d122cb4b7$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $31d11a8d122cb4b7$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $31d11a8d122cb4b7$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */ var $31d11a8d122cb4b7$export$4798917dbf149b79 = /** @class */ function(_super) {\n    $31d11a8d122cb4b7$var$__extends($31d11a8d122cb4b7$export$4798917dbf149b79, _super);\n    function $31d11a8d122cb4b7$export$4798917dbf149b79(secure, host, port, path, key, pingInterval) {\n        if (pingInterval === void 0) pingInterval = 5000;\n        var _this = _super.call(this) || this;\n        _this.pingInterval = pingInterval;\n        _this._disconnected = true;\n        _this._messagesQueue = [];\n        var wsProtocol = secure ? \"wss://\" : \"ws://\";\n        _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n        return _this;\n    }\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.start = function(id, token) {\n        var _this = this;\n        this._id = id;\n        var wsUrl = \"\".concat(this._baseUrl, \"&id=\").concat(id, \"&token=\").concat(token);\n        if (!!this._socket || !this._disconnected) return;\n        this._socket = new WebSocket(wsUrl + \"&version=\" + $0d1ed891c5cb27c0$exports.version);\n        this._disconnected = false;\n        this._socket.onmessage = function(event) {\n            var data;\n            try {\n                data = JSON.parse(event.data);\n                $1615705ecc6adca3$exports.default.log(\"Server message received:\", data);\n            } catch (e) {\n                $1615705ecc6adca3$exports.default.log(\"Invalid server message\", event.data);\n                return;\n            }\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, data);\n        };\n        this._socket.onclose = function(event) {\n            if (_this._disconnected) return;\n            $1615705ecc6adca3$exports.default.log(\"Socket closed.\", event);\n            _this._cleanup();\n            _this._disconnected = true;\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected);\n        };\n        // Take care of the queue of connections if necessary and make sure Peer knows\n        // socket is open.\n        this._socket.onopen = function() {\n            if (_this._disconnected) return;\n            _this._sendQueuedMessages();\n            $1615705ecc6adca3$exports.default.log(\"Socket open\");\n            _this._scheduleHeartbeat();\n        };\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._scheduleHeartbeat = function() {\n        var _this = this;\n        this._wsPingTimer = setTimeout(function() {\n            _this._sendHeartbeat();\n        }, this.pingInterval);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendHeartbeat = function() {\n        if (!this._wsOpen()) {\n            $1615705ecc6adca3$exports.default.log(\"Cannot send heartbeat, because socket closed\");\n            return;\n        }\n        var message = JSON.stringify({\n            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat\n        });\n        this._socket.send(message);\n        this._scheduleHeartbeat();\n    };\n    /** Is the websocket currently open? */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._wsOpen = function() {\n        return !!this._socket && this._socket.readyState === 1;\n    };\n    /** Send queued messages. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendQueuedMessages = function() {\n        var e_1, _a;\n        //Create copy of queue and clear it,\n        //because send method push the message back to queue if smth will go wrong\n        var copiedQueue = $31d11a8d122cb4b7$var$__spreadArray([], $31d11a8d122cb4b7$var$__read(this._messagesQueue), false);\n        this._messagesQueue = [];\n        try {\n            for(var copiedQueue_1 = $31d11a8d122cb4b7$var$__values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()){\n                var message = copiedQueue_1_1.value;\n                this.send(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    /** Exposed send for DC & Peer. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.send = function(data) {\n        if (this._disconnected) return;\n        // If we didn't get an ID yet, we can't yet send anything so we should queue\n        // up these messages.\n        if (!this._id) {\n            this._messagesQueue.push(data);\n            return;\n        }\n        if (!data.type) {\n            this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, \"Invalid message\");\n            return;\n        }\n        if (!this._wsOpen()) return;\n        var message = JSON.stringify(data);\n        this._socket.send(message);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.close = function() {\n        if (this._disconnected) return;\n        this._cleanup();\n        this._disconnected = true;\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._cleanup = function() {\n        if (this._socket) {\n            this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n            this._socket.close();\n            this._socket = undefined;\n        }\n        clearTimeout(this._wsPingTimer);\n    };\n    return $31d11a8d122cb4b7$export$4798917dbf149b79;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$exports = {};\n\n$parcel$export($353dee38f9ab557b$exports, \"MediaConnection\", () => $353dee38f9ab557b$export$4a84e95a2324ac29, (v) => $353dee38f9ab557b$export$4a84e95a2324ac29 = v);\n\n\nvar $77f14d3e81888156$exports = {};\n\n$parcel$export($77f14d3e81888156$exports, \"Negotiator\", () => $77f14d3e81888156$export$89e6bb5ad64bf4a, (v) => $77f14d3e81888156$export$89e6bb5ad64bf4a = v);\n\n\n\nvar $77f14d3e81888156$var$__assign = undefined && undefined.__assign || function() {\n    $77f14d3e81888156$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $77f14d3e81888156$var$__assign.apply(this, arguments);\n};\nvar $77f14d3e81888156$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $77f14d3e81888156$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\n/**\n * Manages all negotiations between Peers.\n */ var $77f14d3e81888156$export$89e6bb5ad64bf4a = /** @class */ function() {\n    function $77f14d3e81888156$export$89e6bb5ad64bf4a(connection) {\n        this.connection = connection;\n    }\n    /** Returns a PeerConnection object set up correctly (for data, media). */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.startConnection = function(options) {\n        var peerConnection = this._startPeerConnection();\n        // Set the connection's PC.\n        this.connection.peerConnection = peerConnection;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media && options._stream) this._addTracksToConnection(options._stream, peerConnection);\n        // What do we need to do now?\n        if (options.originator) {\n            if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                var dataConnection = this.connection;\n                var config = {\n                    ordered: !!options.reliable\n                };\n                var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n                dataConnection.initialize(dataChannel);\n            }\n            this._makeOffer();\n        } else this.handleSDP(\"OFFER\", options.sdp);\n    };\n    /** Start a PC. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._startPeerConnection = function() {\n        $1615705ecc6adca3$exports.default.log(\"Creating RTCPeerConnection.\");\n        var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n        this._setupListeners(peerConnection);\n        return peerConnection;\n    };\n    /** Set up various WebRTC listeners. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._setupListeners = function(peerConnection) {\n        var _this = this;\n        var peerId = this.connection.peer;\n        var connectionId = this.connection.connectionId;\n        var connectionType = this.connection.type;\n        var provider = this.connection.provider;\n        // ICE CANDIDATES.\n        $1615705ecc6adca3$exports.default.log(\"Listening for ICE candidates.\");\n        peerConnection.onicecandidate = function(evt) {\n            if (!evt.candidate || !evt.candidate.candidate) return;\n            $1615705ecc6adca3$exports.default.log(\"Received ICE candidates for \".concat(peerId, \":\"), evt.candidate);\n            provider.socket.send({\n                type: $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,\n                payload: {\n                    candidate: evt.candidate,\n                    type: connectionType,\n                    connectionId: connectionId\n                },\n                dst: peerId\n            });\n        };\n        peerConnection.oniceconnectionstatechange = function() {\n            switch(peerConnection.iceConnectionState){\n                case \"failed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n                    _this.connection.close();\n                    break;\n                case \"closed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Connection to \" + peerId + \" closed.\"));\n                    _this.connection.close();\n                    break;\n                case \"disconnected\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n                    break;\n                case \"completed\":\n                    peerConnection.onicecandidate = $06cb531ed7840f78$export$7debb50ef11d5e0b.noop;\n                    break;\n            }\n            _this.connection.emit(\"iceStateChanged\", peerConnection.iceConnectionState);\n        };\n        // DATACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for data channel\");\n        // Fired between offer and answer, so options should already be saved\n        // in the options hash.\n        peerConnection.ondatachannel = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received data channel\");\n            var dataChannel = evt.channel;\n            var connection = provider.getConnection(peerId, connectionId);\n            connection.initialize(dataChannel);\n        };\n        // MEDIACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for remote stream\");\n        peerConnection.ontrack = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received remote stream\");\n            var stream = evt.streams[0];\n            var connection = provider.getConnection(peerId, connectionId);\n            if (connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                var mediaConnection = connection;\n                _this._addStreamToMediaConnection(stream, mediaConnection);\n            }\n        };\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.cleanup = function() {\n        $1615705ecc6adca3$exports.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n        var peerConnection = this.connection.peerConnection;\n        if (!peerConnection) return;\n        this.connection.peerConnection = null;\n        //unsubscribe from all PeerConnection's events\n        peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function() {};\n        var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n        var dataChannelNotClosed = false;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n            var dataConnection = this.connection;\n            var dataChannel = dataConnection.dataChannel;\n            if (dataChannel) dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n        }\n        if (peerConnectionNotClosed || dataChannelNotClosed) peerConnection.close();\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeOffer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createOffer(this.connection.options.constraints)\n                        ];\n                    case 2:\n                        offer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created offer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(offer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", offer, \"for:\".concat(this.connection.peer));\n                        payload = {\n                            sdp: offer,\n                            type: this.connection.type,\n                            connectionId: this.connection.connectionId,\n                            metadata: this.connection.metadata,\n                            browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                        };\n                        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                            dataConnection = this.connection;\n                            payload = $77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({}, payload), {\n                                label: dataConnection.label,\n                                reliable: dataConnection.reliable,\n                                serialization: dataConnection.serialization\n                            });\n                        }\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Offer,\n                            payload: payload,\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_2 = _a.sent();\n                        // TODO: investigate why _makeOffer is being called from the answer\n                        if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n                            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_2);\n                            $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_2);\n                        }\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_1 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_1);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to createOffer, \", err_1_1);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeAnswer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, answer, err_3, err_1_2;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createAnswer()\n                        ];\n                    case 2:\n                        answer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created answer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(answer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", answer, \"for:\".concat(this.connection.peer));\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Answer,\n                            payload: {\n                                sdp: answer,\n                                type: this.connection.type,\n                                connectionId: this.connection.connectionId,\n                                browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                            },\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_3 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_3);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_3);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_2 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_2);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to create answer, \", err_1_2);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle an SDP. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleSDP = function(type, sdp) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, self, err_4;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        sdp = new RTCSessionDescription(sdp);\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        $1615705ecc6adca3$exports.default.log(\"Setting remote description\", sdp);\n                        self = this;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setRemoteDescription(sdp)\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set remoteDescription:\".concat(type, \" for:\").concat(this.connection.peer));\n                        if (!(type === \"OFFER\")) return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                        return [\n                            4 /*yield*/ ,\n                            self._makeAnswer()\n                        ];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_4 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_4);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setRemoteDescription, \", err_4);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle a candidate. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleCandidate = function(ice) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        $1615705ecc6adca3$exports.default.log(\"handleCandidate:\", ice);\n                        candidate = ice.candidate;\n                        sdpMLineIndex = ice.sdpMLineIndex;\n                        sdpMid = ice.sdpMid;\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.addIceCandidate(new RTCIceCandidate({\n                                sdpMid: sdpMid,\n                                sdpMLineIndex: sdpMLineIndex,\n                                candidate: candidate\n                            }))\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Added ICE candidate for:\".concat(this.connection.peer));\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 3:\n                        err_5 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_5);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to handleCandidate, \", err_5);\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 4:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addTracksToConnection = function(stream, peerConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add tracks from stream \".concat(stream.id, \" to peer connection\"));\n        if (!peerConnection.addTrack) return $1615705ecc6adca3$exports.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n        stream.getTracks().forEach(function(track) {\n            peerConnection.addTrack(track, stream);\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addStreamToMediaConnection = function(stream, mediaConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add stream \".concat(stream.id, \" to media connection \").concat(mediaConnection.connectionId));\n        mediaConnection.addStream(stream);\n    };\n    return $77f14d3e81888156$export$89e6bb5ad64bf4a;\n}();\n\n\n\nvar $0b3b332fd86c5202$exports = {};\n\n$parcel$export($0b3b332fd86c5202$exports, \"BaseConnection\", () => $0b3b332fd86c5202$export$23a2a68283c24d80, (v) => $0b3b332fd86c5202$export$23a2a68283c24d80 = v);\n\nvar $0b3b332fd86c5202$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $0b3b332fd86c5202$export$23a2a68283c24d80 = /** @class */ function(_super) {\n    $0b3b332fd86c5202$var$__extends($0b3b332fd86c5202$export$23a2a68283c24d80, _super);\n    function $0b3b332fd86c5202$export$23a2a68283c24d80(peer, provider, options) {\n        var _this = _super.call(this) || this;\n        _this.peer = peer;\n        _this.provider = provider;\n        _this.options = options;\n        _this._open = false;\n        _this.metadata = options.metadata;\n        return _this;\n    }\n    Object.defineProperty($0b3b332fd86c5202$export$23a2a68283c24d80.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return $0b3b332fd86c5202$export$23a2a68283c24d80;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $353dee38f9ab557b$var$__assign = undefined && undefined.__assign || function() {\n    $353dee38f9ab557b$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $353dee38f9ab557b$var$__assign.apply(this, arguments);\n};\nvar $353dee38f9ab557b$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps the streaming interface between two Peers.\n */ var $353dee38f9ab557b$export$4a84e95a2324ac29 = /** @class */ function(_super) {\n    $353dee38f9ab557b$var$__extends($353dee38f9ab557b$export$4a84e95a2324ac29, _super);\n    function $353dee38f9ab557b$export$4a84e95a2324ac29(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this._localStream = _this.options._stream;\n        _this.connectionId = _this.options.connectionId || $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        if (_this._localStream) _this._negotiator.startConnection({\n            _stream: _this._localStream,\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Media;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"localStream\", {\n        get: function() {\n            return this._localStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"remoteStream\", {\n        get: function() {\n            return this._remoteStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.addStream = function(remoteStream) {\n        $1615705ecc6adca3$exports.default.log(\"Receiving stream\", remoteStream);\n        this._remoteStream = remoteStream;\n        _super.prototype.emit.call(this, \"stream\", remoteStream); // Should we call this `open`?\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.handleMessage = function(message) {\n        var type = message.type;\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                // Forward to negotiator\n                this._negotiator.handleSDP(type, payload.sdp);\n                this._open = true;\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\".concat(type, \" from peer:\").concat(this.peer));\n                break;\n        }\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.answer = function(stream, options) {\n        var e_1, _a;\n        if (options === void 0) options = {};\n        if (this._localStream) {\n            $1615705ecc6adca3$exports.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n            return;\n        }\n        this._localStream = stream;\n        if (options && options.sdpTransform) this.options.sdpTransform = options.sdpTransform;\n        this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({}, this.options._payload), {\n            _stream: stream\n        }));\n        // Retrieve lost messages stored because PeerConnection not set up.\n        var messages = this.provider._getMessages(this.connectionId);\n        try {\n            for(var messages_1 = $353dee38f9ab557b$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                var message = messages_1_1.value;\n                this.handleMessage(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n        this._open = true;\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.close = function() {\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        this._localStream = null;\n        this._remoteStream = null;\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.options && this.options._stream) this.options._stream = null;\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX = \"mc_\";\n    return $353dee38f9ab557b$export$4a84e95a2324ac29;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\nvar $3356170d7bce7f20$exports = {};\n\n$parcel$export($3356170d7bce7f20$exports, \"DataConnection\", () => $3356170d7bce7f20$export$d365f7ad9d7df9c9, (v) => $3356170d7bce7f20$export$d365f7ad9d7df9c9 = v);\n\n\n\n\n\nvar $3014d862dcc9946b$exports = {};\n\n$parcel$export($3014d862dcc9946b$exports, \"EncodingQueue\", () => $3014d862dcc9946b$export$c6913ae0ed687038, (v) => $3014d862dcc9946b$export$c6913ae0ed687038 = v);\n\n\nvar $3014d862dcc9946b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3014d862dcc9946b$export$c6913ae0ed687038 = /** @class */ function(_super) {\n    $3014d862dcc9946b$var$__extends($3014d862dcc9946b$export$c6913ae0ed687038, _super);\n    function $3014d862dcc9946b$export$c6913ae0ed687038() {\n        var _this = _super.call(this) || this;\n        _this.fileReader = new FileReader();\n        _this._queue = [];\n        _this._processing = false;\n        _this.fileReader.onload = function(evt) {\n            _this._processing = false;\n            if (evt.target) _this.emit(\"done\", evt.target.result);\n            _this.doNextTask();\n        };\n        _this.fileReader.onerror = function(evt) {\n            $1615705ecc6adca3$exports.default.error(\"EncodingQueue error:\", evt);\n            _this._processing = false;\n            _this.destroy();\n            _this.emit(\"error\", evt);\n        };\n        return _this;\n    }\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"queue\", {\n        get: function() {\n            return this._queue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"size\", {\n        get: function() {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"processing\", {\n        get: function() {\n            return this._processing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.enque = function(blob) {\n        this.queue.push(blob);\n        if (this.processing) return;\n        this.doNextTask();\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.destroy = function() {\n        this.fileReader.abort();\n        this._queue = [];\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.doNextTask = function() {\n        if (this.size === 0) return;\n        if (this.processing) return;\n        this._processing = true;\n        this.fileReader.readAsArrayBuffer(this.queue.shift());\n    };\n    return $3014d862dcc9946b$export$c6913ae0ed687038;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $3356170d7bce7f20$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3356170d7bce7f20$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps a DataChannel between two Peers.\n */ var $3356170d7bce7f20$export$d365f7ad9d7df9c9 = /** @class */ function(_super) {\n    $3356170d7bce7f20$var$__extends($3356170d7bce7f20$export$d365f7ad9d7df9c9, _super);\n    function $3356170d7bce7f20$export$d365f7ad9d7df9c9(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this.stringify = JSON.stringify;\n        _this.parse = JSON.parse;\n        _this._buffer = [];\n        _this._bufferSize = 0;\n        _this._buffering = false;\n        _this._chunkedData = {};\n        _this._encodingQueue = new $3014d862dcc9946b$exports.EncodingQueue();\n        _this.connectionId = _this.options.connectionId || $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this.label = _this.options.label || _this.connectionId;\n        _this.serialization = _this.options.serialization || $60fadef21a2daafc$export$89f507cf986a947.Binary;\n        _this.reliable = !!_this.options.reliable;\n        _this._encodingQueue.on(\"done\", function(ab) {\n            _this._bufferedSend(ab);\n        });\n        _this._encodingQueue.on(\"error\", function() {\n            $1615705ecc6adca3$exports.default.error(\"DC#\".concat(_this.connectionId, \": Error occured in encoding from blob to arraybuffer, close DC\"));\n            _this.close();\n        });\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        _this._negotiator.startConnection(_this.options._payload || {\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"dataChannel\", {\n        get: function() {\n            return this._dc;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"bufferSize\", {\n        get: function() {\n            return this._bufferSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Called by the Negotiator when the DataChannel is ready. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.initialize = function(dc) {\n        this._dc = dc;\n        this._configureDataChannel();\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._configureDataChannel = function() {\n        var _this = this;\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob || $06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable) this.dataChannel.binaryType = \"arraybuffer\";\n        this.dataChannel.onopen = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc connection success\"));\n            _this._open = true;\n            _this.emit(\"open\");\n        };\n        this.dataChannel.onmessage = function(e) {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc onmessage:\"), e.data);\n            _this._handleDataMessage(e);\n        };\n        this.dataChannel.onclose = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc closed for:\"), _this.peer);\n            _this.close();\n        };\n    };\n    // Handles a DataChannel message.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleDataMessage = function(_a) {\n        var _this = this;\n        var data = _a.data;\n        var datatype = data.constructor;\n        var isBinarySerialization = this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8;\n        var deserializedData = data;\n        if (isBinarySerialization) {\n            if (datatype === Blob) {\n                // Datatype should never be blob\n                $06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(data, function(ab) {\n                    var unpackedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab);\n                    _this.emit(\"data\", unpackedData);\n                });\n                return;\n            } else if (datatype === ArrayBuffer) deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(data);\n            else if (datatype === String) {\n                // String fallback for binary data for browsers that don't support binary yet\n                var ab1 = $06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(data);\n                deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab1);\n            }\n        } else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) deserializedData = this.parse(data);\n        // Check if we've chunked--if so, piece things back together.\n        // We're guaranteed that this isn't 0.\n        if (deserializedData.__peerData) {\n            this._handleChunk(deserializedData);\n            return;\n        }\n        _super.prototype.emit.call(this, \"data\", deserializedData);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleChunk = function(data) {\n        var id = data.__peerData;\n        var chunkInfo = this._chunkedData[id] || {\n            data: [],\n            count: 0,\n            total: data.total\n        };\n        chunkInfo.data[data.n] = data.data;\n        chunkInfo.count++;\n        this._chunkedData[id] = chunkInfo;\n        if (chunkInfo.total === chunkInfo.count) {\n            // Clean up before making the recursive call to `_handleDataMessage`.\n            delete this._chunkedData[id];\n            // We've received all the chunks--time to construct the complete data.\n            var data_1 = new Blob(chunkInfo.data);\n            this._handleDataMessage({\n                data: data_1\n            });\n        }\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.close = function() {\n        this._buffer = [];\n        this._bufferSize = 0;\n        this._chunkedData = {};\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.dataChannel) {\n            this.dataChannel.onopen = null;\n            this.dataChannel.onmessage = null;\n            this.dataChannel.onclose = null;\n            this._dc = null;\n        }\n        if (this._encodingQueue) {\n            this._encodingQueue.destroy();\n            this._encodingQueue.removeAllListeners();\n            this._encodingQueue = null;\n        }\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    /** Allows user to send data. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.send = function(data, chunked) {\n        if (!this.open) {\n            _super.prototype.emit.call(this, \"error\", new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n            return;\n        }\n        if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) this._bufferedSend(this.stringify(data));\n        else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8) {\n            var blob = $06cb531ed7840f78$export$7debb50ef11d5e0b.pack(data);\n            if (!chunked && blob.size > $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU) {\n                this._sendChunks(blob);\n                return;\n            }\n            if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob) // We only do this if we really need to (e.g. blobs are not supported),\n            // because this conversion is costly.\n            this._encodingQueue.enque(blob);\n            else this._bufferedSend(blob);\n        } else this._bufferedSend(data);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._bufferedSend = function(msg) {\n        if (this._buffering || !this._trySend(msg)) {\n            this._buffer.push(msg);\n            this._bufferSize = this._buffer.length;\n        }\n    };\n    // Returns true if the send succeeds.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._trySend = function(msg) {\n        var _this = this;\n        if (!this.open) return false;\n        if (this.dataChannel.bufferedAmount > $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT) {\n            this._buffering = true;\n            setTimeout(function() {\n                _this._buffering = false;\n                _this._tryBuffer();\n            }, 50);\n            return false;\n        }\n        try {\n            this.dataChannel.send(msg);\n        } catch (e) {\n            $1615705ecc6adca3$exports.default.error(\"DC#:\".concat(this.connectionId, \" Error when sending:\"), e);\n            this._buffering = true;\n            this.close();\n            return false;\n        }\n        return true;\n    };\n    // Try to send the first message in the buffer.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._tryBuffer = function() {\n        if (!this.open) return;\n        if (this._buffer.length === 0) return;\n        var msg = this._buffer[0];\n        if (this._trySend(msg)) {\n            this._buffer.shift();\n            this._bufferSize = this._buffer.length;\n            this._tryBuffer();\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._sendChunks = function(blob) {\n        var e_1, _a;\n        var blobs = $06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(blob);\n        $1615705ecc6adca3$exports.default.log(\"DC#\".concat(this.connectionId, \" Try to send \").concat(blobs.length, \" chunks...\"));\n        try {\n            for(var blobs_1 = $3356170d7bce7f20$var$__values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()){\n                var blob_1 = blobs_1_1.value;\n                this.send(blob_1, true);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.handleMessage = function(message) {\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                this._negotiator.handleSDP(message.type, payload.sdp);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n                break;\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX = \"dc_\";\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT = 8388608;\n    return $3356170d7bce7f20$export$d365f7ad9d7df9c9;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\n\nvar $9e85b3e1327369e6$exports = {};\n\n$parcel$export($9e85b3e1327369e6$exports, \"API\", () => $9e85b3e1327369e6$export$2c4e825dc9120f87, (v) => $9e85b3e1327369e6$export$2c4e825dc9120f87 = v);\n\n\n\nvar $9e85b3e1327369e6$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $9e85b3e1327369e6$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nvar $9e85b3e1327369e6$export$2c4e825dc9120f87 = /** @class */ function() {\n    function $9e85b3e1327369e6$export$2c4e825dc9120f87(_options) {\n        this._options = _options;\n    }\n    $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype._buildRequest = function(method) {\n        var protocol = this._options.secure ? \"https\" : \"http\";\n        var _a = this._options, host = _a.host, port = _a.port, path = _a.path, key = _a.key;\n        var url = new URL(\"\".concat(protocol, \"://\").concat(host, \":\").concat(port).concat(path).concat(key, \"/\").concat(method));\n        // TODO: Why timestamp, why random?\n        url.searchParams.set(\"ts\", \"\".concat(Date.now()).concat(Math.random()));\n        url.searchParams.set(\"version\", $0d1ed891c5cb27c0$exports.version);\n        return fetch(url.href, {\n            referrerPolicy: this._options.referrerPolicy\n        });\n    };\n    /** Get a unique ID from the server via XHR and initialize with it. */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.retrieveId = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, error_1, pathError;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"id\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) throw new Error(\"Error. Status:\".concat(response.status));\n                        return [\n                            2 /*return*/ ,\n                            response.text()\n                        ];\n                    case 2:\n                        error_1 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving ID\", error_1);\n                        pathError = \"\";\n                        if (this._options.path === \"/\" && this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n                        throw new Error(\"Could not get an ID from the server.\" + pathError);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** @deprecated */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.listAllPeers = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, helpfulError, error_2;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"peers\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) {\n                            if (response.status === 401) {\n                                helpfulError = \"\";\n                                if (this._options.host === $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";\n                                else helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n                                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n                            }\n                            throw new Error(\"Error. Status:\".concat(response.status));\n                        }\n                        return [\n                            2 /*return*/ ,\n                            response.json()\n                        ];\n                    case 2:\n                        error_2 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving list peers\", error_2);\n                        throw new Error(\"Could not get list peers from the server.\" + error_2);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    return $9e85b3e1327369e6$export$2c4e825dc9120f87;\n}();\n\n\nvar $26088d7da5b03f69$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $26088d7da5b03f69$var$__assign = undefined && undefined.__assign || function() {\n    $26088d7da5b03f69$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $26088d7da5b03f69$var$__assign.apply(this, arguments);\n};\nvar $26088d7da5b03f69$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar $26088d7da5b03f69$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $26088d7da5b03f69$var$PeerOptions = /** @class */ function() {\n    function PeerOptions() {}\n    return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */ var $26088d7da5b03f69$export$ecd1fc136c422448 = /** @class */ function(_super) {\n    $26088d7da5b03f69$var$__extends($26088d7da5b03f69$export$ecd1fc136c422448, _super);\n    function $26088d7da5b03f69$export$ecd1fc136c422448(id1, options) {\n        var _this = _super.call(this) || this;\n        _this._id = null;\n        _this._lastServerId = null;\n        // States.\n        _this._destroyed = false; // Connections have been killed\n        _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n        _this._open = false; // Sockets and such are not yet open.\n        _this._connections = new Map(); // All connections for this peer.\n        _this._lostMessages = new Map(); // src => [list of messages]\n        var userId;\n        // Deal with overloading\n        if (id1 && id1.constructor == Object) options = id1;\n        else if (id1) userId = id1.toString();\n        // Configurize options\n        options = $26088d7da5b03f69$var$__assign({\n            debug: 0,\n            host: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,\n            port: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,\n            path: \"/\",\n            key: $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY,\n            token: $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),\n            config: $06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,\n            referrerPolicy: \"strict-origin-when-cross-origin\"\n        }, options);\n        _this._options = options;\n        // Detect relative URL host.\n        if (_this._options.host === \"/\") _this._options.host = window.location.hostname;\n        // Set path correctly.\n        if (_this._options.path) {\n            if (_this._options.path[0] !== \"/\") _this._options.path = \"/\" + _this._options.path;\n            if (_this._options.path[_this._options.path.length - 1] !== \"/\") _this._options.path += \"/\";\n        }\n        // Set whether we use SSL to same as current host\n        if (_this._options.secure === undefined && _this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = $06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure();\n        else if (_this._options.host == $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = true;\n        // Set a custom log function if present\n        if (_this._options.logFunction) $1615705ecc6adca3$exports.default.setLogFunction(_this._options.logFunction);\n        $1615705ecc6adca3$exports.default.logLevel = _this._options.debug || 0;\n        _this._api = new $9e85b3e1327369e6$exports.API(options);\n        _this._socket = _this._createServerConnection();\n        // Sanity checks\n        // Ensure WebRTC supported\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo && !$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible, \"The current browser does not support WebRTC\");\n            return _this;\n        }\n        // Ensure alphanumeric id\n        if (!!userId && !$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(userId)) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID, \"ID \\\"\".concat(userId, \"\\\" is invalid\"));\n            return _this;\n        }\n        if (userId) _this._initialize(userId);\n        else _this._api.retrieveId().then(function(id) {\n            return _this._initialize(id);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n        return _this;\n    }\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"id\", {\n        /**\n         * The brokering ID of this peer\n         */ get: function() {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"options\", {\n        get: function() {\n            return this._options;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"socket\", {\n        get: function() {\n            return this._socket;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"connections\", {\n        /**\n         * A hash of all connections associated with this peer, keyed by the remote peer's ID.\n         * @deprecated\n         * Return type will change from Object to Map<string,[]>\n         */ get: function() {\n            var e_1, _a;\n            var plainConnections = Object.create(null);\n            try {\n                for(var _b = $26088d7da5b03f69$var$__values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()){\n                    var _d = $26088d7da5b03f69$var$__read(_c.value, 2), k = _d[0], v = _d[1];\n                    plainConnections[k] = v;\n                }\n            } catch (e_1_1) {\n                e_1 = {\n                    error: e_1_1\n                };\n            } finally{\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                } finally{\n                    if (e_1) throw e_1.error;\n                }\n            }\n            return plainConnections;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"destroyed\", {\n        /**\n         * true if this peer and all of its connections can no longer be used.\n         */ get: function() {\n            return this._destroyed;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"disconnected\", {\n        /**\n         * false if there is an active connection to the PeerServer.\n         */ get: function() {\n            return this._disconnected;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._createServerConnection = function() {\n        var _this = this;\n        var socket = new $31d11a8d122cb4b7$exports.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, function(data) {\n            _this._handleMessage(data);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, function(error) {\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError, error);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected, function() {\n            if (_this.disconnected) return;\n            _this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network, \"Lost connection to server.\");\n            _this.disconnect();\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close, function() {\n            if (_this.disconnected) return;\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed, \"Underlying socket is already closed.\");\n        });\n        return socket;\n    };\n    /** Initialize a connection with the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._initialize = function(id) {\n        this._id = id;\n        this.socket.start(id, this._options.token);\n    };\n    /** Handles messages from the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._handleMessage = function(message) {\n        var e_2, _a;\n        var type = message.type;\n        var payload = message.payload;\n        var peerId = message.src;\n        switch(type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:\n                this._lastServerId = this.id;\n                this._open = true;\n                this.emit(\"open\", this.id);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, payload.msg);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID, \"ID \\\"\".concat(this.id, \"\\\" is taken\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey, \"API KEY \\\"\".concat(this._options.key, \"\\\" is invalid\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:\n                $1615705ecc6adca3$exports.default.log(\"Received leave message from \".concat(peerId));\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:\n                this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable, \"Could not connect to peer \".concat(peerId));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:\n                // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection) {\n                    connection.close();\n                    $1615705ecc6adca3$exports.default.warn(\"Offer received for existing Connection ID:\".concat(connectionId));\n                }\n                // Create a new connection.\n                if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                    var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata\n                    });\n                    connection = mediaConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"call\", mediaConnection);\n                } else if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                    var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata,\n                        label: payload.label,\n                        serialization: payload.serialization,\n                        reliable: payload.reliable\n                    });\n                    connection = dataConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"connection\", dataConnection);\n                } else {\n                    $1615705ecc6adca3$exports.default.warn(\"Received malformed connection type:\".concat(payload.type));\n                    return;\n                }\n                // Find messages.\n                var messages = this._getMessages(connectionId);\n                try {\n                    for(var messages_1 = $26088d7da5b03f69$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                        var message_1 = messages_1_1.value;\n                        connection.handleMessage(message_1);\n                    }\n                } catch (e_2_1) {\n                    e_2 = {\n                        error: e_2_1\n                    };\n                } finally{\n                    try {\n                        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n                    } finally{\n                        if (e_2) throw e_2.error;\n                    }\n                }\n                break;\n            default:\n                if (!payload) {\n                    $1615705ecc6adca3$exports.default.warn(\"You received a malformed message from \".concat(peerId, \" of type \").concat(type));\n                    return;\n                }\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection && connection.peerConnection) // Pass it on.\n                connection.handleMessage(message);\n                else if (connectionId) // Store for possible later use\n                this._storeMessage(connectionId, message);\n                else $1615705ecc6adca3$exports.default.warn(\"You received an unrecognized message:\", message);\n                break;\n        }\n    };\n    /** Stores messages without a set up connection, to be claimed later. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._storeMessage = function(connectionId, message) {\n        if (!this._lostMessages.has(connectionId)) this._lostMessages.set(connectionId, []);\n        this._lostMessages.get(connectionId).push(message);\n    };\n    /** Retrieve messages from lost message store */ //TODO Change it to private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._getMessages = function(connectionId) {\n        var messages = this._lostMessages.get(connectionId);\n        if (messages) {\n            this._lostMessages.delete(connectionId);\n            return messages;\n        }\n        return [];\n    };\n    /**\n     * Connects to the remote peer specified by id and returns a data connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param options for specifying details about Peer Connection\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.connect = function(peer, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peer, this, options);\n        this._addConnection(peer, dataConnection);\n        return dataConnection;\n    };\n    /**\n     * Calls the remote peer specified by id and returns a media connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param stream The caller's media stream\n     * @param options Metadata associated with the connection, passed in by whoever initiated the connection.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.call = function(peer, stream, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        if (!stream) {\n            $1615705ecc6adca3$exports.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n            return;\n        }\n        var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peer, this, $26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({}, options), {\n            _stream: stream\n        }));\n        this._addConnection(peer, mediaConnection);\n        return mediaConnection;\n    };\n    /** Add a data/media connection to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._addConnection = function(peerId, connection) {\n        $1615705ecc6adca3$exports.default.log(\"add connection \".concat(connection.type, \":\").concat(connection.connectionId, \" to peerId:\").concat(peerId));\n        if (!this._connections.has(peerId)) this._connections.set(peerId, []);\n        this._connections.get(peerId).push(connection);\n    };\n    //TODO should be private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._removeConnection = function(connection) {\n        var connections = this._connections.get(connection.peer);\n        if (connections) {\n            var index = connections.indexOf(connection);\n            if (index !== -1) connections.splice(index, 1);\n        }\n        //remove from lost messages\n        this._lostMessages.delete(connection.connectionId);\n    };\n    /** Retrieve a data/media connection for this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.getConnection = function(peerId, connectionId) {\n        var e_3, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return null;\n        try {\n            for(var connections_1 = $26088d7da5b03f69$var$__values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()){\n                var connection = connections_1_1.value;\n                if (connection.connectionId === connectionId) return connection;\n            }\n        } catch (e_3_1) {\n            e_3 = {\n                error: e_3_1\n            };\n        } finally{\n            try {\n                if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n            } finally{\n                if (e_3) throw e_3.error;\n            }\n        }\n        return null;\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._delayedAbort = function(type, message) {\n        var _this = this;\n        setTimeout(function() {\n            _this._abort(type, message);\n        }, 0);\n    };\n    /**\n     * Emits an error message and destroys the Peer.\n     * The Peer is not destroyed if it's in a disconnected state, in which case\n     * it retains its disconnected state and its existing connections.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._abort = function(type, message) {\n        $1615705ecc6adca3$exports.default.error(\"Aborting!\");\n        this.emitError(type, message);\n        if (!this._lastServerId) this.destroy();\n        else this.disconnect();\n    };\n    /** Emits a typed error message. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.emitError = function(type, err) {\n        $1615705ecc6adca3$exports.default.error(\"Error:\", err);\n        var error;\n        if (typeof err === \"string\") error = new Error(err);\n        else error = err;\n        error.type = type;\n        this.emit(\"error\", error);\n    };\n    /**\n     * Destroys the Peer: closes all active connections as well as the connection\n     *  to the server.\n     * Warning: The peer can no longer create or accept connections after being\n     *  destroyed.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.destroy = function() {\n        if (this.destroyed) return;\n        $1615705ecc6adca3$exports.default.log(\"Destroy peer with ID:\".concat(this.id));\n        this.disconnect();\n        this._cleanup();\n        this._destroyed = true;\n        this.emit(\"close\");\n    };\n    /** Disconnects every connection on this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanup = function() {\n        var e_4, _a;\n        try {\n            for(var _b = $26088d7da5b03f69$var$__values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()){\n                var peerId = _c.value;\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n            }\n        } catch (e_4_1) {\n            e_4 = {\n                error: e_4_1\n            };\n        } finally{\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally{\n                if (e_4) throw e_4.error;\n            }\n        }\n        this.socket.removeAllListeners();\n    };\n    /** Closes all connections to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanupPeer = function(peerId) {\n        var e_5, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return;\n        try {\n            for(var connections_2 = $26088d7da5b03f69$var$__values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()){\n                var connection = connections_2_1.value;\n                connection.close();\n            }\n        } catch (e_5_1) {\n            e_5 = {\n                error: e_5_1\n            };\n        } finally{\n            try {\n                if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n            } finally{\n                if (e_5) throw e_5.error;\n            }\n        }\n    };\n    /**\n     * Disconnects the Peer's connection to the PeerServer. Does not close any\n     *  active connections.\n     * Warning: The peer can no longer create or accept connections after being\n     *  disconnected. It also cannot reconnect to the server.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.disconnect = function() {\n        if (this.disconnected) return;\n        var currentId = this.id;\n        $1615705ecc6adca3$exports.default.log(\"Disconnect peer with ID:\".concat(currentId));\n        this._disconnected = true;\n        this._open = false;\n        this.socket.close();\n        this._lastServerId = currentId;\n        this._id = null;\n        this.emit(\"disconnected\", currentId);\n    };\n    /** Attempts to reconnect with the same ID. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.reconnect = function() {\n        if (this.disconnected && !this.destroyed) {\n            $1615705ecc6adca3$exports.default.log(\"Attempting reconnection to server with ID \".concat(this._lastServerId));\n            this._disconnected = false;\n            this._initialize(this._lastServerId);\n        } else if (this.destroyed) throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n        else if (!this.disconnected && !this.open) // Do nothing. We're still connecting the first time.\n        $1615705ecc6adca3$exports.default.error(\"In a hurry? We're still trying to make the initial connection!\");\n        else throw new Error(\"Peer \".concat(this.id, \" cannot reconnect because it is not disconnected from the server!\"));\n    };\n    /**\n     * Get a list of available peer IDs. If you're running your own server, you'll\n     * want to set allow_discovery: true in the PeerServer options. If you're using\n     * the cloud server, email team@peerjs.com to get the functionality enabled for\n     * your key.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.listAllPeers = function(cb) {\n        var _this = this;\n        if (cb === void 0) cb = function(_) {};\n        this._api.listAllPeers().then(function(peers) {\n            return cb(peers);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY = \"peerjs\";\n    return $26088d7da5b03f69$export$ecd1fc136c422448;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $70d766613f57b014$export$2e2bcd8739ae039 = $26088d7da5b03f69$exports.Peer;\n\n\nexport {$70d766613f57b014$export$2e2bcd8739ae039 as default, $26088d7da5b03f69$export$ecd1fc136c422448 as Peer, $06cb531ed7840f78$export$7debb50ef11d5e0b as util};\n//# sourceMappingURL=bundler.mjs.map\n","function dummyTrack() {\n    const canvas = document.createElement(\"canvas\"); //, { width: 0, height: 0})\n    canvas.width = canvas.height = 2; // Doesn't work when 1 (?!)\n    const ctx = canvas.getContext('2d');\n    ctx === null || ctx === void 0 ? void 0 : ctx.fillRect(0, 0, canvas.width, canvas.height);\n    requestAnimationFrame(function draw() {\n        ctx === null || ctx === void 0 ? void 0 : ctx.fillRect(0, 0, canvas.width, canvas.height);\n        requestAnimationFrame(draw);\n    });\n    // Also works. Probably it should be done once connected.\n    //setTimeout(() => { ctx?.fillRect(0,0, canvas.width, canvas.height) }, 4000)\n    return canvas.captureStream(60).getTracks()[0];\n}\nexport default function RequestLocalStream() {\n    return navigator.mediaDevices.getUserMedia({ audio: true })\n        .then(aStream => {\n        const aTrack = aStream.getAudioTracks()[0];\n        if (!aTrack) {\n            throw new Error(\"No audio tracks provided\");\n        }\n        return new _LocalStream(aTrack);\n    });\n}\nclass _LocalStream {\n    constructor(aTrack) {\n        this.mediaRequested = false;\n        this.onVideoTrackCb = null;\n        this.vdTrack = dummyTrack();\n        this.stream = new MediaStream([aTrack, this.vdTrack]);\n    }\n    toggleVideo() {\n        if (!this.mediaRequested) {\n            return navigator.mediaDevices.getUserMedia({ video: true })\n                .then(vStream => {\n                const vTrack = vStream.getVideoTracks()[0];\n                if (!vTrack) {\n                    throw new Error(\"No video track provided\");\n                }\n                this.stream.addTrack(vTrack);\n                this.stream.removeTrack(this.vdTrack);\n                this.mediaRequested = true;\n                if (this.onVideoTrackCb) {\n                    this.onVideoTrackCb(vTrack);\n                }\n                return true;\n            })\n                .catch(e => {\n                // TODO: log\n                return false;\n            });\n        }\n        let enabled = true;\n        this.stream.getVideoTracks().forEach(track => {\n            track.enabled = enabled = enabled && !track.enabled;\n        });\n        return Promise.resolve(enabled);\n    }\n    toggleAudio() {\n        let enabled = true;\n        this.stream.getAudioTracks().forEach(track => {\n            track.enabled = enabled = enabled && !track.enabled;\n        });\n        return enabled;\n    }\n    onVideoTrack(cb) {\n        this.onVideoTrackCb = cb;\n    }\n    stop() {\n        this.stream.getTracks().forEach(t => t.stop());\n    }\n}\n","export default class Mouse {\n    constructor() {\n        this.position = [0, 0];\n        this.pScrEl = document.scrollingElement || document.documentElement; // Is it always correct\n        this.lastScrEl = null;\n        this.resetLastScrEl = () => { this.lastScrEl = null; };\n        this.handleWScroll = e => {\n            if (e.target !== this.lastScrEl &&\n                this.lastScrEl !== \"window\") {\n                this.resetLastScrEl();\n            }\n        };\n        this.mouse = document.createElement('div');\n        Object.assign(this.mouse.style, {\n            width: \"20px\",\n            height: \"20px\",\n            opacity: \".4\",\n            borderRadius: \"50%\",\n            position: \"absolute\",\n            zIndex: \"999998\",\n            background: \"radial-gradient(red, transparent)\",\n        });\n    }\n    mount() {\n        document.body.appendChild(this.mouse);\n        window.addEventListener(\"scroll\", this.handleWScroll);\n        window.addEventListener(\"resize\", this.resetLastScrEl);\n    }\n    move(pos) {\n        if (this.position[0] !== pos[0] || this.position[1] !== pos[1]) {\n            this.resetLastScrEl();\n        }\n        this.position = pos;\n        Object.assign(this.mouse.style, {\n            left: `${pos[0] || 0}px`,\n            top: `${pos[1] || 0}px`\n        });\n    }\n    getPosition() {\n        return this.position;\n    }\n    click(pos) {\n        const el = document.elementFromPoint(pos[0], pos[1]);\n        if (el instanceof HTMLElement) {\n            el.click();\n            el.focus();\n            return el;\n        }\n        return null;\n    }\n    scroll(delta) {\n        // what would be the browser-like logic?\n        const [mouseX, mouseY] = this.position;\n        const [dX, dY] = delta;\n        let el = this.lastScrEl;\n        // Scroll the same one \n        if (el instanceof Element) {\n            el.scrollLeft += dX;\n            el.scrollTop += dY;\n            return; // TODO: if not scrolled\n        }\n        if (el === \"window\") {\n            window.scroll(this.pScrEl.scrollLeft + dX, this.pScrEl.scrollTop + dY);\n            return;\n        }\n        el = document.elementFromPoint(mouseX - this.pScrEl.scrollLeft, mouseY - this.pScrEl.scrollTop);\n        while (el) {\n            // el.scrollTopMax > 0 // available in firefox\n            if (el.scrollHeight > el.clientHeight || el.scrollWidth > el.clientWidth) {\n                const styles = getComputedStyle(el);\n                if (styles.overflow.indexOf(\"scroll\") >= 0 || styles.overflow.indexOf(\"auto\") >= 0) { // returns true for body in habr.com but it's not scrollable\n                    const esl = el.scrollLeft;\n                    const est = el.scrollTop;\n                    el.scrollLeft += dX;\n                    el.scrollTop += dY;\n                    if (esl !== el.scrollLeft || est !== el.scrollTop) { // doesn't work if the scroll-behavior is \"smooth\"\n                        this.lastScrEl = el;\n                        return;\n                    }\n                }\n            }\n            el = el.parentElement;\n        }\n        // If not scrolled\n        window.scroll(this.pScrEl.scrollLeft + dX, this.pScrEl.scrollTop + dY);\n        this.lastScrEl = \"window\";\n    }\n    remove() {\n        if (this.mouse.parentElement) {\n            document.body.removeChild(this.mouse);\n        }\n        window.removeEventListener(\"scroll\", this.handleWScroll);\n        window.removeEventListener(\"resize\", this.resetLastScrEl);\n    }\n}\n","function makeButton(options, defaultStyle) {\n    if (options instanceof HTMLButtonElement) {\n        return options;\n    }\n    const btn = document.createElement(\"button\");\n    Object.assign(btn.style, {\n        padding: \"10px 14px\",\n        fontSize: \"14px\",\n        borderRadius: \"3px\",\n        border: \"none\",\n        cursor: \"pointer\",\n        display: \"flex\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        marginRight: \"10px\"\n    }, defaultStyle);\n    if (typeof options === \"string\") {\n        btn.innerHTML = options;\n    }\n    else {\n        btn.innerHTML = options.innerHTML;\n        Object.assign(btn.style, options.style);\n    }\n    return btn;\n}\nexport default class ConfirmWindow {\n    constructor(options) {\n        this.resolve = () => { };\n        this.reject = () => { };\n        const wrapper = document.createElement(\"div\");\n        const popup = document.createElement(\"div\");\n        const p = document.createElement(\"p\");\n        p.innerText = options.text;\n        const buttons = document.createElement(\"div\");\n        const confirmBtn = makeButton(options.confirmBtn, {\n            background: \"rgba(0, 167, 47, 1)\",\n            color: \"white\"\n        });\n        const declineBtn = makeButton(options.declineBtn, {\n            background: \"#FFE9E9\",\n            color: \"#CC0000\"\n        });\n        buttons.appendChild(confirmBtn);\n        buttons.appendChild(declineBtn);\n        popup.appendChild(p);\n        popup.appendChild(buttons);\n        Object.assign(buttons.style, {\n            marginTop: \"10px\",\n            display: \"flex\",\n            alignItems: \"center\",\n            // justifyContent: \"space-evenly\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            boxShadow: \"0px 0px 3.99778px 1.99889px rgba(0, 0, 0, 0.1)\",\n            borderRadius: \"6px\"\n        });\n        Object.assign(popup.style, {\n            font: \"14px 'Roboto', sans-serif\",\n            position: \"relative\",\n            pointerEvents: \"auto\",\n            margin: \"4em auto\",\n            width: \"90%\",\n            maxWidth: \"fit-content\",\n            padding: \"20px\",\n            background: \"#F3F3F3\",\n            //opacity: \".75\",\n            color: \"black\",\n            borderRadius: \"3px\",\n            boxShadow: \"0px 0px 3.99778px 1.99889px rgba(0, 0, 0, 0.1)\"\n        }, options.style);\n        Object.assign(wrapper.style, {\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            height: \"100%\",\n            width: \"100%\",\n            pointerEvents: \"none\",\n            zIndex: 2147483647 - 1\n        });\n        wrapper.appendChild(popup);\n        this.wrapper = wrapper;\n        confirmBtn.onclick = () => {\n            this._remove();\n            this.resolve(true);\n        };\n        declineBtn.onclick = () => {\n            this._remove();\n            this.resolve(false);\n        };\n    }\n    mount() {\n        document.body.appendChild(this.wrapper);\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n    _remove() {\n        if (!this.wrapper.parentElement) {\n            return;\n        }\n        document.body.removeChild(this.wrapper);\n    }\n    remove() {\n        this._remove();\n        this.reject();\n    }\n}\n","// TODO: something with these big strings in bundle?\nexport const declineCall = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-telephone\" viewBox=\"0 0 16 16\">\n<path d=\"M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z\"/>\n</svg>`;\nexport const acceptCall = declineCall.replace('fill=\"#ef5261\"', 'fill=\"green\"');\nexport const cross = `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bi bi-x-lg\" viewBox=\"0 0 16 16\" fill=\"#ef5261\">\n  <path  fill-rule=\"evenodd\" d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"/>\n  <path  fill-rule=\"evenodd\" d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"/>\n</svg>`;\nexport const remoteControl = `<svg fill=\"green\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path d=\"M638.59 368.22l-33.37-211.59c-8.86-50.26-48.4-90.77-100.66-103.13h-.07a803.14 803.14 0 0 0-369 0C83.17 65.86 43.64 106.36 34.78 156.63L1.41 368.22C-8.9 426.73 38.8 480 101.51 480c49.67 0 93.77-30.07 109.48-74.64l7.52-21.36h203l7.49 21.36C444.72 449.93 488.82 480 538.49 480c62.71 0 110.41-53.27 100.1-111.78zm-45.11 54.88c-13.28 15.82-33.33 24.9-55 24.9-36.2 0-68.07-21.41-79.29-53.27l-7.53-21.36-7.52-21.37H195.86l-7.53 21.37-7.53 21.36C169.58 426.59 137.71 448 101.51 448c-21.66 0-41.71-9.08-55-24.9A59.93 59.93 0 0 1 33 373.2l33.28-211c6.66-37.7 36.72-68.14 76.53-77.57a771.07 771.07 0 0 1 354.38 0c39.84 9.42 69.87 39.86 76.42 77l33.47 212.15c3.11 17.64-1.72 35.16-13.6 49.32zm-339.3-218.74h-42.54v-42.54a9.86 9.86 0 0 0-9.82-9.82h-19.64a9.86 9.86 0 0 0-9.82 9.82v42.54h-42.54a9.86 9.86 0 0 0-9.82 9.82v19.64a9.86 9.86 0 0 0 9.82 9.82h42.54v42.54a9.86 9.86 0 0 0 9.82 9.82h19.64a9.86 9.86 0 0 0 9.82-9.82v-42.54h42.54a9.86 9.86 0 0 0 9.82-9.82v-19.64a9.86 9.86 0 0 0-9.82-9.82zM416 224a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm64-64a32 32 0 1 0 32 32 32 32 0 0 0-32-32z\"/></svg>`;\n","import { acceptCall } from '../icons.js';\nconst TEXT_GRANT_REMORTE_ACCESS = \"Grant Remote Control\";\nconst TEXT_REJECT = \"Reject\";\nconst TEXT_ANSWER_CALL = `${acceptCall} &#xa0 Answer`;\nfunction confirmDefault(opts, confirmBtn, declineBtn, text) {\n    const isStr = typeof opts === \"string\";\n    return Object.assign({\n        text: isStr ? opts : text,\n        confirmBtn,\n        declineBtn\n    }, isStr ? undefined : opts);\n}\nexport const callConfirmDefault = (opts) => confirmDefault(opts, TEXT_ANSWER_CALL, TEXT_REJECT, \"You have an incoming call. Do you want to answer?\");\nexport const controlConfirmDefault = (opts) => confirmDefault(opts, TEXT_GRANT_REMORTE_ACCESS, TEXT_REJECT, \"Agent requested remote control. Allow?\");\n","import Mouse from './Mouse.js';\nimport ConfirmWindow from './ConfirmWindow/ConfirmWindow.js';\nimport { controlConfirmDefault } from './ConfirmWindow/defaults.js';\nvar RCStatus;\n(function (RCStatus) {\n    RCStatus[RCStatus[\"Disabled\"] = 0] = \"Disabled\";\n    RCStatus[RCStatus[\"Requesting\"] = 1] = \"Requesting\";\n    RCStatus[RCStatus[\"Enabled\"] = 2] = \"Enabled\";\n})(RCStatus || (RCStatus = {}));\nlet setInputValue = function (value) { this.value = value; };\nconst nativeInputValueDescriptor = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, \"value\");\nif (nativeInputValueDescriptor && nativeInputValueDescriptor.set) {\n    setInputValue = nativeInputValueDescriptor.set;\n}\nexport default class RemoteControl {\n    constructor(options, onGrand, onRelease) {\n        this.options = options;\n        this.onGrand = onGrand;\n        this.onRelease = onRelease;\n        this.status = RCStatus.Disabled;\n        this.agentID = null;\n        this.confirm = null;\n        this.requestControl = (id) => {\n            if (this.agentID !== null) {\n                this.releaseControl(id);\n                return;\n            }\n            setTimeout(() => {\n                if (this.status === RCStatus.Requesting) {\n                    this.releaseControl(id);\n                }\n            }, 30000);\n            this.agentID = id;\n            this.status = RCStatus.Requesting;\n            this.confirm = new ConfirmWindow(controlConfirmDefault(this.options.controlConfirm));\n            this.confirm.mount().then(allowed => {\n                if (allowed) {\n                    this.grantControl(id);\n                }\n                else {\n                    this.releaseControl(id);\n                }\n            }).catch();\n        };\n        this.grantControl = (id) => {\n            this.agentID = id;\n            this.status = RCStatus.Enabled;\n            this.mouse = new Mouse();\n            this.mouse.mount();\n            sessionStorage.setItem(this.options.session_control_peer_key, id);\n            this.onGrand(id);\n        };\n        this.releaseControl = (id) => {\n            var _a, _b;\n            if (this.agentID !== id) {\n                return;\n            }\n            (_a = this.confirm) === null || _a === void 0 ? void 0 : _a.remove();\n            (_b = this.mouse) === null || _b === void 0 ? void 0 : _b.remove();\n            this.mouse = null;\n            this.status = RCStatus.Disabled;\n            this.agentID = null;\n            sessionStorage.removeItem(this.options.session_control_peer_key);\n            this.onRelease(id);\n        };\n        this.scroll = (id, d) => { var _a; id === this.agentID && ((_a = this.mouse) === null || _a === void 0 ? void 0 : _a.scroll(d)); };\n        this.move = (id, xy) => { var _a; id === this.agentID && ((_a = this.mouse) === null || _a === void 0 ? void 0 : _a.move(xy)); };\n        this.focused = null;\n        this.click = (id, xy) => {\n            if (id !== this.agentID || !this.mouse) {\n                return;\n            }\n            this.focused = this.mouse.click(xy);\n        };\n        this.focus = (id, el) => {\n            this.focused = el;\n        };\n        this.input = (id, value) => {\n            if (id !== this.agentID || !this.mouse || !this.focused) {\n                return;\n            }\n            if (this.focused instanceof HTMLTextAreaElement\n                || this.focused instanceof HTMLInputElement) {\n                setInputValue.call(this.focused, value);\n                const ev = new Event('input', { bubbles: true });\n                this.focused.dispatchEvent(ev);\n            }\n            else if (this.focused.isContentEditable) {\n                this.focused.innerText = value;\n            }\n        };\n    }\n    reconnect(ids) {\n        const storedID = sessionStorage.getItem(this.options.session_control_peer_key);\n        if (storedID !== null && ids.indexOf(storedID) !== -1) {\n            this.grantControl(storedID);\n        }\n        else {\n            sessionStorage.removeItem(this.options.session_control_peer_key);\n        }\n    }\n}\n","import attachDND from './dnd.js';\nconst SS_START_TS_KEY = \"__openreplay_assist_call_start_ts\";\nexport default class CallWindow {\n    constructor() {\n        this.vRemote = null;\n        this.vLocal = null;\n        this.audioBtn = null;\n        this.videoBtn = null;\n        this.endCallBtn = null;\n        this.agentNameElem = null;\n        this.videoContainer = null;\n        this.vPlaceholder = null;\n        this.aRemote = null;\n        this.localStream = null;\n        this.videoRequested = false;\n        const iframe = this.iframe = document.createElement('iframe');\n        Object.assign(iframe.style, {\n            position: \"fixed\",\n            zIndex: 2147483647 - 1,\n            border: \"none\",\n            bottom: \"10px\",\n            right: \"10px\",\n            height: \"200px\",\n            width: \"200px\",\n        });\n        // TODO: find the best attribute name for the ignoring iframes\n        iframe.setAttribute(\"data-openreplay-obscured\", \"\");\n        iframe.setAttribute(\"data-openreplay-hidden\", \"\");\n        iframe.setAttribute(\"data-openreplay-ignore\", \"\");\n        document.body.appendChild(iframe);\n        const doc = iframe.contentDocument;\n        if (!doc) {\n            console.error(\"OpenReplay: CallWindow iframe document is not reachable.\");\n            return;\n        }\n        //const baseHref = \"https://static.openreplay.com/tracker-assist/test\"\n        const baseHref = \"https://static.openreplay.com/tracker-assist/3.4.4\";\n        this.load = fetch(baseHref + \"/index.html\")\n            .then(r => r.text())\n            .then((text) => {\n            iframe.onload = () => {\n                const assistSection = doc.getElementById(\"or-assist\");\n                assistSection === null || assistSection === void 0 ? void 0 : assistSection.classList.remove(\"status-connecting\");\n                //iframe.style.height = doc.body.scrollHeight + 'px';\n                //iframe.style.width = doc.body.scrollWidth + 'px';\n                this.adjustIframeSize();\n                iframe.onload = null;\n            };\n            // ?\n            text = text.replace(/href=\"css/g, `href=\"${baseHref}/css`);\n            doc.open();\n            doc.write(text);\n            doc.close();\n            this.vLocal = doc.getElementById(\"video-local\");\n            this.vRemote = doc.getElementById(\"video-remote\");\n            this.videoContainer = doc.getElementById(\"video-container\");\n            this.audioBtn = doc.getElementById(\"audio-btn\");\n            if (this.audioBtn) {\n                this.audioBtn.onclick = () => this.toggleAudio();\n            }\n            this.videoBtn = doc.getElementById(\"video-btn\");\n            if (this.videoBtn) {\n                this.videoBtn.onclick = () => this.toggleVideo();\n            }\n            this.endCallBtn = doc.getElementById(\"end-call-btn\");\n            this.agentNameElem = doc.getElementById(\"agent-name\");\n            this.vPlaceholder = doc.querySelector(\"#remote-stream p\");\n            const tsElem = doc.getElementById(\"duration\");\n            if (tsElem) {\n                const startTs = Number(sessionStorage.getItem(SS_START_TS_KEY)) || Date.now();\n                sessionStorage.setItem(SS_START_TS_KEY, startTs.toString());\n                this.tsInterval = setInterval(() => {\n                    const ellapsed = Date.now() - startTs;\n                    const secsFull = ~~(ellapsed / 1000);\n                    const mins = ~~(secsFull / 60);\n                    const secs = secsFull - mins * 60;\n                    tsElem.innerText = `${mins}:${secs < 10 ? 0 : ''}${secs}`;\n                }, 500);\n            }\n            const dragArea = doc.querySelector(\".drag-area\");\n            if (dragArea) {\n                // TODO: save coordinates on the new page\n                attachDND(iframe, dragArea, doc.documentElement);\n            }\n        });\n        //this.toggleVideoUI(false)\n        //this.toggleRemoteVideoUI(false)\n    }\n    adjustIframeSize() {\n        const doc = this.iframe.contentDocument;\n        if (!doc) {\n            return;\n        }\n        this.iframe.style.height = doc.body.scrollHeight + 'px';\n        this.iframe.style.width = doc.body.scrollWidth + 'px';\n    }\n    setCallEndAction(endCall) {\n        this.load.then(() => {\n            if (this.endCallBtn) {\n                this.endCallBtn.onclick = endCall;\n            }\n        });\n    }\n    setRemoteStream(rStream) {\n        this.load.then(() => {\n            if (this.vRemote && !this.vRemote.srcObject) {\n                this.vRemote.srcObject = rStream;\n                if (this.vPlaceholder) {\n                    this.vPlaceholder.innerText = \"Video has been paused. Click anywhere to resume.\";\n                }\n                // Hack for audio. Doesen't work inside the iframe because of some magical reasons (check if it is connected to autoplay?)\n                this.aRemote = document.createElement(\"audio\");\n                this.aRemote.autoplay = true;\n                this.aRemote.style.display = \"none\";\n                this.aRemote.srcObject = rStream;\n                document.body.appendChild(this.aRemote);\n            }\n            // Hack to determine if the remote video is enabled\n            if (this.checkRemoteVideoInterval) {\n                clearInterval(this.checkRemoteVideoInterval);\n            } // just in case\n            let enabled = false;\n            this.checkRemoteVideoInterval = setInterval(() => {\n                var _a;\n                const settings = (_a = rStream.getVideoTracks()[0]) === null || _a === void 0 ? void 0 : _a.getSettings();\n                //console.log(settings)\n                const isDummyVideoTrack = !!settings && (settings.width === 2 || settings.frameRate === 0);\n                const shouldBeEnabled = !isDummyVideoTrack;\n                if (enabled !== shouldBeEnabled) {\n                    this.toggleRemoteVideoUI(enabled = shouldBeEnabled);\n                }\n            }, 1000);\n        });\n    }\n    toggleRemoteVideoUI(enable) {\n        this.load.then(() => {\n            if (this.videoContainer) {\n                if (enable) {\n                    this.videoContainer.classList.add(\"remote\");\n                }\n                else {\n                    this.videoContainer.classList.remove(\"remote\");\n                }\n                this.adjustIframeSize();\n            }\n        });\n    }\n    // TODO: on construction?\n    setLocalStream(lStream) {\n        this.localStream = lStream;\n    }\n    playRemote() {\n        this.vRemote && this.vRemote.play();\n    }\n    setAssistentName(name) {\n        this.load.then(() => {\n            if (this.agentNameElem) {\n                this.agentNameElem.innerText = name;\n            }\n        });\n    }\n    toggleAudioUI(enabled) {\n        if (!this.audioBtn) {\n            return;\n        }\n        if (enabled) {\n            this.audioBtn.classList.remove(\"muted\");\n        }\n        else {\n            this.audioBtn.classList.add(\"muted\");\n        }\n    }\n    toggleAudio() {\n        var _a;\n        const enabled = ((_a = this.localStream) === null || _a === void 0 ? void 0 : _a.toggleAudio()) || false;\n        this.toggleAudioUI(enabled);\n    }\n    toggleVideoUI(enabled) {\n        if (!this.videoBtn || !this.videoContainer) {\n            return;\n        }\n        if (enabled) {\n            this.videoContainer.classList.add(\"local\");\n            this.videoBtn.classList.remove(\"off\");\n        }\n        else {\n            this.videoContainer.classList.remove(\"local\");\n            this.videoBtn.classList.add(\"off\");\n        }\n        this.adjustIframeSize();\n    }\n    toggleVideo() {\n        var _a;\n        (_a = this.localStream) === null || _a === void 0 ? void 0 : _a.toggleVideo().then(enabled => {\n            this.toggleVideoUI(enabled);\n            this.load.then(() => {\n                if (this.vLocal && this.localStream && !this.vLocal.srcObject) {\n                    this.vLocal.srcObject = this.localStream.stream;\n                }\n            });\n        });\n    }\n    remove() {\n        var _a;\n        (_a = this.localStream) === null || _a === void 0 ? void 0 : _a.stop();\n        clearInterval(this.tsInterval);\n        clearInterval(this.checkRemoteVideoInterval);\n        if (this.iframe.parentElement) {\n            document.body.removeChild(this.iframe);\n        }\n        if (this.aRemote && this.aRemote.parentElement) {\n            document.body.removeChild(this.aRemote);\n        }\n        sessionStorage.removeItem(SS_START_TS_KEY);\n    }\n}\n","/*\n  Here implemented the case when both dragArea and dropArea\n  are located inside the document of the dragging iframe.\n  Thus, all the events belong and relate to that inside document.\n*/\nexport default function attachDND(movingEl, dragArea, dropArea) {\n    dragArea.addEventListener('pointerdown', userPressed, { passive: true });\n    let bbox, startX, startY, raf, deltaX = 0, deltaY = 0;\n    function userPressed(event) {\n        startX = event.clientX;\n        startY = event.clientY;\n        bbox = movingEl.getBoundingClientRect();\n        dropArea.addEventListener('pointermove', userMoved, { passive: true });\n        dropArea.addEventListener('pointerup', userReleased, { passive: true });\n        dropArea.addEventListener('pointercancel', userReleased, { passive: true });\n    }\n    ;\n    /*\n      In case where the dropArea moves along with the dragging object\n      we can only append deltas, but not to define each time it moves.\n    */\n    function userMoved(event) {\n        if (!raf) {\n            deltaX += event.clientX - startX;\n            deltaY += event.clientY - startY;\n            deltaX = Math.min(Math.max(deltaX, -bbox.left), window.innerWidth - bbox.right);\n            deltaY = Math.min(Math.max(deltaY, -bbox.top), window.innerHeight - bbox.bottom);\n            raf = requestAnimationFrame(userMovedRaf);\n        }\n    }\n    function userMovedRaf() {\n        movingEl.style.transform = \"translate3d(\" + deltaX + \"px,\" + deltaY + \"px, 0px)\";\n        raf = null;\n    }\n    function userReleased() {\n        dropArea.removeEventListener('pointermove', userMoved);\n        dropArea.removeEventListener('pointerup', userReleased);\n        dropArea.removeEventListener('pointercancel', userReleased);\n        if (raf) {\n            cancelAnimationFrame(raf);\n            raf = null;\n        }\n        movingEl.style.left = bbox.left + deltaX + \"px\";\n        movingEl.style.top = bbox.top + deltaY + \"px\";\n        movingEl.style.transform = \"translate3d(0px,0px,0px)\";\n        deltaX = deltaY = 0;\n    }\n}\n","export default class AnnotationCanvas {\n    constructor() {\n        this.ctx = null;\n        this.painting = false;\n        this.resizeCanvas = () => {\n            this.canvas.width = window.innerWidth;\n            this.canvas.height = window.innerHeight;\n        };\n        this.lastPosition = [0, 0];\n        this.start = (p) => {\n            this.painting = true;\n            this.clrTmID && clearTimeout(this.clrTmID);\n            this.lastPosition = p;\n        };\n        this.stop = () => {\n            if (!this.painting) {\n                return;\n            }\n            this.painting = false;\n            this.fadeOut();\n        };\n        this.move = (p) => {\n            if (!this.ctx || !this.painting) {\n                return;\n            }\n            this.ctx.globalAlpha = 1.0;\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.lastPosition[0], this.lastPosition[1]);\n            this.ctx.lineTo(p[0], p[1]);\n            this.ctx.lineWidth = 8;\n            this.ctx.lineCap = \"round\";\n            this.ctx.lineJoin = \"round\";\n            this.ctx.strokeStyle = \"red\";\n            this.ctx.stroke();\n            this.lastPosition = p;\n        };\n        this.clrTmID = null;\n        this.canvas = document.createElement('canvas');\n        Object.assign(this.canvas.style, {\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            pointerEvents: \"none\",\n            zIndex: 2147483647 - 2,\n        });\n    }\n    fadeOut() {\n        let timeoutID;\n        const fadeStep = () => {\n            if (!this.ctx || this.painting) {\n                return;\n            }\n            this.ctx.globalCompositeOperation = 'destination-out';\n            this.ctx.fillStyle = \"rgba(255, 255, 255, 0.1)\";\n            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n            this.ctx.globalCompositeOperation = 'source-over';\n            timeoutID = setTimeout(fadeStep, 100);\n        };\n        this.clrTmID = setTimeout(() => {\n            clearTimeout(timeoutID);\n            this.ctx &&\n                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        }, 4000);\n        fadeStep();\n    }\n    mount() {\n        document.body.appendChild(this.canvas);\n        this.ctx = this.canvas.getContext(\"2d\");\n        window.addEventListener(\"resize\", this.resizeCanvas);\n        this.resizeCanvas();\n    }\n    remove() {\n        if (this.canvas.parentNode) {\n            this.canvas.parentNode.removeChild(this.canvas);\n        }\n        window.removeEventListener(\"resize\", this.resizeCanvas);\n    }\n}\n","import { connect } from 'socket.io-client';\nimport Peer from 'peerjs';\nimport RequestLocalStream from './LocalStream.js';\nimport RemoteControl from './RemoteControl.js';\nimport CallWindow from './CallWindow.js';\nimport AnnotationCanvas from './AnnotationCanvas.js';\nimport ConfirmWindow from './ConfirmWindow/ConfirmWindow.js';\nimport { callConfirmDefault } from './ConfirmWindow/defaults.js';\nvar CallingState;\n(function (CallingState) {\n    CallingState[CallingState[\"Requesting\"] = 0] = \"Requesting\";\n    CallingState[CallingState[\"True\"] = 1] = \"True\";\n    CallingState[CallingState[\"False\"] = 2] = \"False\";\n})(CallingState || (CallingState = {}));\n;\nexport default class Assist {\n    constructor(app, options, noSecureMode = false) {\n        this.app = app;\n        this.noSecureMode = noSecureMode;\n        this.version = \"3.5.15\";\n        this.socket = null;\n        this.peer = null;\n        this.assistDemandedRestart = false;\n        this.callingState = CallingState.False;\n        this.agents = {};\n        this.onRemoteCallEnd = () => { };\n        this.options = Object.assign({\n            session_calling_peer_key: \"__openreplay_calling_peer\",\n            session_control_peer_key: \"__openreplay_control_peer\",\n            config: null,\n            onCallStart: () => { },\n            onAgentConnect: () => { },\n            onRemoteControlStart: () => { },\n            callConfirm: {},\n            controlConfirm: {}, // TODO: clear options passing/merging/overriting\n        }, options);\n        if (document.hidden !== undefined) {\n            const sendActivityState = () => this.emit(\"UPDATE_SESSION\", { active: !document.hidden });\n            app.attachEventListener(document, 'visibilitychange', sendActivityState, false, false);\n        }\n        const titleNode = document.querySelector('title');\n        const observer = titleNode && new MutationObserver(() => {\n            this.emit(\"UPDATE_SESSION\", { pageTitle: document.title });\n        });\n        app.attachStartCallback(() => {\n            if (this.assistDemandedRestart) {\n                return;\n            }\n            this.onStart();\n            observer && observer.observe(titleNode, { subtree: true, characterData: true, childList: true });\n        });\n        app.attachStopCallback(() => {\n            if (this.assistDemandedRestart) {\n                return;\n            }\n            this.clean();\n            observer && observer.disconnect();\n        });\n        app.attachCommitCallback((messages) => {\n            if (this.agentsConnected) {\n                // @ts-ignore No need in statistics messages. TODO proper filter\n                if (messages.length === 2 && messages[0]._id === 0 && messages[1]._id === 49) {\n                    return;\n                }\n                this.emit(\"messages\", messages);\n            }\n        });\n        app.session.attachUpdateCallback(sessInfo => this.emit(\"UPDATE_SESSION\", sessInfo));\n    }\n    emit(ev, ...args) {\n        this.socket && this.socket.emit(ev, ...args);\n    }\n    get agentsConnected() {\n        return Object.keys(this.agents).length > 0;\n    }\n    notifyCallEnd() {\n        this.emit(\"call_end\");\n    }\n    onStart() {\n        const app = this.app;\n        const peerID = `${app.getProjectKey()}-${app.getSessionID()}`;\n        // SocketIO\n        const socket = this.socket = connect(app.getHost(), {\n            path: '/ws-assist/socket',\n            query: {\n                \"peerId\": peerID,\n                \"identity\": \"session\",\n                \"sessionInfo\": JSON.stringify(Object.assign({ pageTitle: document.title, active: true }, this.app.getSessionInfo())),\n            },\n            transports: [\"websocket\"],\n        });\n        socket.onAny((...args) => app.debug.log(\"Socket:\", ...args));\n        const remoteControl = new RemoteControl(this.options, id => {\n            this.agents[id].onControlReleased = this.options.onRemoteControlStart();\n            this.emit(\"control_granted\", id);\n            annot = new AnnotationCanvas();\n            annot.mount();\n        }, id => {\n            const cb = this.agents[id].onControlReleased;\n            delete this.agents[id].onControlReleased;\n            typeof cb === \"function\" && cb();\n            this.emit(\"control_rejected\", id);\n            if (annot != null) {\n                annot.remove();\n                annot = null;\n            }\n        });\n        // TODO: check incoming args\n        socket.on(\"request_control\", remoteControl.requestControl);\n        socket.on(\"release_control\", remoteControl.releaseControl);\n        socket.on(\"scroll\", remoteControl.scroll);\n        socket.on(\"click\", remoteControl.click);\n        socket.on(\"move\", remoteControl.move);\n        socket.on(\"focus\", (clientID, nodeID) => {\n            const el = app.nodes.getNode(nodeID);\n            if (el instanceof HTMLElement) {\n                remoteControl.focus(clientID, el);\n            }\n        });\n        socket.on(\"input\", remoteControl.input);\n        let annot = null;\n        socket.on(\"moveAnnotation\", (_, p) => annot && annot.move(p)); // TODO: restrict by id\n        socket.on(\"startAnnotation\", (_, p) => annot && annot.start(p));\n        socket.on(\"stopAnnotation\", () => annot && annot.stop());\n        socket.on(\"NEW_AGENT\", (id, info) => {\n            this.agents[id] = Object.assign({ onDisconnect: this.options.onAgentConnect && this.options.onAgentConnect() }, info);\n            this.assistDemandedRestart = true;\n            this.app.stop();\n            this.app.start().then(() => { this.assistDemandedRestart = false; });\n        });\n        socket.on(\"AGENTS_CONNECTED\", (ids) => {\n            ids.forEach(id => {\n                this.agents[id] = {\n                    onDisconnect: this.options.onAgentConnect && this.options.onAgentConnect(),\n                };\n            });\n            this.assistDemandedRestart = true;\n            this.app.stop();\n            this.app.start().then(() => { this.assistDemandedRestart = false; });\n            remoteControl.reconnect(ids);\n        });\n        let confirmCall = null;\n        socket.on(\"AGENT_DISCONNECTED\", (id) => {\n            remoteControl.releaseControl(id);\n            // close the call also\n            if (callingAgent === id) {\n                confirmCall === null || confirmCall === void 0 ? void 0 : confirmCall.remove();\n                this.onRemoteCallEnd();\n            }\n            // @ts-ignore (wtf, typescript?!)\n            this.agents[id] && this.agents[id].onDisconnect != null && this.agents[id].onDisconnect();\n            delete this.agents[id];\n        });\n        socket.on(\"NO_AGENT\", () => {\n            this.agents = {};\n        });\n        socket.on(\"call_end\", () => this.onRemoteCallEnd()); // TODO: check if agent calling id\n        // TODO: fix the code\n        let agentName = \"\";\n        let callingAgent = \"\";\n        socket.on(\"_agent_name\", (id, name) => { agentName = name; callingAgent = id; });\n        // PeerJS call (todo: use native WebRTC)\n        const peerOptions = {\n            host: app.getHost(),\n            path: '/assist',\n            port: location.protocol === 'http:' && this.noSecureMode ? 80 : 443,\n            //debug: appOptions.__debug_log ? 2 : 0, // 0 Print nothing //1 Prints only errors. / 2 Prints errors and warnings. / 3 Prints all logs.\n        };\n        if (this.options.config) {\n            peerOptions['config'] = this.options.config;\n        }\n        const peer = this.peer = new Peer(peerID, peerOptions);\n        // app.debug.log('Peer created: ', peer)\n        // @ts-ignore\n        peer.on('error', e => app.debug.warn(\"Peer error: \", e.type, e));\n        peer.on('disconnected', () => peer.reconnect());\n        peer.on('call', (call) => {\n            app.debug.log(\"Call: \", call);\n            if (this.callingState !== CallingState.False) {\n                call.close();\n                //this.notifyCallEnd() // TODO: strictly connect calling peer with agent socket.id\n                app.debug.warn(\"Call closed instantly bacause line is busy. CallingState: \", this.callingState);\n                return;\n            }\n            const setCallingState = (newState) => {\n                if (newState === CallingState.True) {\n                    sessionStorage.setItem(this.options.session_calling_peer_key, call.peer);\n                }\n                else if (newState === CallingState.False) {\n                    sessionStorage.removeItem(this.options.session_calling_peer_key);\n                }\n                this.callingState = newState;\n            };\n            let confirmAnswer;\n            const callingPeer = sessionStorage.getItem(this.options.session_calling_peer_key);\n            if (callingPeer === call.peer) {\n                confirmAnswer = Promise.resolve(true);\n            }\n            else {\n                setCallingState(CallingState.Requesting);\n                confirmCall = new ConfirmWindow(callConfirmDefault(this.options.callConfirm || {\n                    text: this.options.confirmText,\n                    style: this.options.confirmStyle,\n                }));\n                confirmAnswer = confirmCall.mount();\n                this.playNotificationSound();\n                this.onRemoteCallEnd = () => {\n                    app.debug.log(\"Received call_end during confirm window opened\");\n                    confirmCall === null || confirmCall === void 0 ? void 0 : confirmCall.remove();\n                    setCallingState(CallingState.False);\n                    call.close();\n                };\n                setTimeout(() => {\n                    if (this.callingState !== CallingState.Requesting) {\n                        return;\n                    }\n                    call.close();\n                    confirmCall === null || confirmCall === void 0 ? void 0 : confirmCall.remove();\n                    this.notifyCallEnd();\n                    setCallingState(CallingState.False);\n                }, 30000);\n            }\n            confirmAnswer.then(agreed => {\n                if (!agreed) {\n                    call.close();\n                    this.notifyCallEnd();\n                    setCallingState(CallingState.False);\n                    return;\n                }\n                const callUI = new CallWindow();\n                annot = new AnnotationCanvas();\n                annot.mount();\n                callUI.setAssistentName(agentName);\n                const onCallEnd = this.options.onCallStart();\n                const handleCallEnd = () => {\n                    app.debug.log(\"Handle Call End\");\n                    call.close();\n                    callUI.remove();\n                    annot && annot.remove();\n                    annot = null;\n                    setCallingState(CallingState.False);\n                    onCallEnd && onCallEnd();\n                };\n                const initiateCallEnd = () => {\n                    this.notifyCallEnd();\n                    handleCallEnd();\n                };\n                this.onRemoteCallEnd = handleCallEnd;\n                call.on('error', e => {\n                    app.debug.warn(\"Call error:\", e);\n                    initiateCallEnd();\n                });\n                RequestLocalStream().then(lStream => {\n                    call.on('stream', function (rStream) {\n                        callUI.setRemoteStream(rStream);\n                        const onInteraction = () => {\n                            callUI.playRemote();\n                            document.removeEventListener(\"click\", onInteraction);\n                        };\n                        document.addEventListener(\"click\", onInteraction);\n                    });\n                    lStream.onVideoTrack(vTrack => {\n                        const sender = call.peerConnection.getSenders().find(s => { var _a; return ((_a = s.track) === null || _a === void 0 ? void 0 : _a.kind) === \"video\"; });\n                        if (!sender) {\n                            app.debug.warn(\"No video sender found\");\n                            return;\n                        }\n                        app.debug.log(\"sender found:\", sender);\n                        sender.replaceTrack(vTrack);\n                    });\n                    callUI.setCallEndAction(initiateCallEnd);\n                    callUI.setLocalStream(lStream);\n                    call.answer(lStream.stream);\n                    setCallingState(CallingState.True);\n                })\n                    .catch(e => {\n                    app.debug.warn(\"Audio mediadevice request error:\", e);\n                    initiateCallEnd();\n                });\n            }).catch(); // in case of Confirm.remove() without any confirmation/decline\n        });\n    }\n    playNotificationSound() {\n        if ('Audio' in window) {\n            new Audio(\"https://static.openreplay.com/tracker-assist/notification.mp3\")\n                .play()\n                .catch(e => {\n                this.app.debug.warn(e);\n            });\n        }\n    }\n    clean() {\n        if (this.peer) {\n            this.peer.destroy();\n            this.app.debug.log(\"Peer destroyed\");\n        }\n        if (this.socket) {\n            this.socket.disconnect();\n            this.app.debug.log(\"Socket disconnected\");\n        }\n    }\n}\n","import './_slim.js';\nimport Assist from './Assist.js';\nexport default function (opts) {\n    return function (app, appOptions = {}) {\n        var _a;\n        // @ts-ignore\n        if (app === null || !((_a = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getUserMedia)) { // 93.04% browsers\n            return;\n        }\n        if (!app.checkRequiredVersion || !app.checkRequiredVersion(\"3.5.14\")) {\n            console.warn(\"OpenReplay Assist: couldn't load. The minimum required version of @openreplay/tracker@3.5.14 is not met\");\n            return;\n        }\n        app.notify.log(\"OpenReplay Assist initializing.\");\n        const assist = new Assist(app, opts, appOptions.__DISABLE_SECURE_MODE);\n        app.debug.log(assist);\n        return assist;\n    };\n}\n"],"names":["e","r","byteLength","getLens","t","f","toByteArray","h","i","o","u","n","_byteLength","a","s","charCodeAt","fromByteArray","length","push","encodeChunk","join","Uint8Array","Array","Error","indexOf","tripletToBase64","Symbol","for","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","createBuffer","RangeError","Object","setPrototypeOf","prototype","TypeError","allocUnsafe","from","isEncoding","write","slice","fromString","ArrayBuffer","isView","fromArrayLike","isInstance","buffer","fromArrayBuffer","SharedArrayBuffer","valueOf","isBuffer","checked","copy","undefined","numberIsNaN","type","isArray","data","fromObject","toPrimitive","assertSize","toString","arguments","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","call","lastIndexOf","String","read","readUInt16BE","c","hexWrite","Number","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","Math","min","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","foo","typedArraySupport","console","error","defineProperty","enumerable","get","byteOffset","poolSize","fill","allocUnsafeSlow","_isBuffer","compare","offset","concat","swap16","swap32","swap64","apply","toLocaleString","equals","inspect","replace","trim","includes","isFinite","toJSON","_arr","fromCharCode","checkOffset","checkInt","checkIEEE754","writeFloat","writeDouble","subarray","readUIntLE","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","copyWithin","set","Infinity","split","base64clean","constructor","name","l","p","NaN","y","g","abs","isNaN","floor","log","LN2","__nccwpck_require__","exports","ab","__dirname","module","BufferBuilder","binaryFeatures","BinaryPack","unpack","Unpacker","pack","packer","Packer","getBuffer","index","dataBuffer","dataView","bufferBuilder","_utf8Replace","m","code","size","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","uint16","uint32","uint64","uint8","buf","str","objects","map","key","value","exp","h32","l32","j","pack_string","pack_integer","pack_double","append","pack_array","Blob","File","pack_bin","useArrayBufferView","startsWith","pack_object","Date","toBinaryPack","flush","blob","pack_uint8","pack_uint16","pack_uint32","utf8Length","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","sign","frac0","frac1","b32","obj","keys","prop","hasOwnProperty","high","low","useBlobBuilder","BlobBuilder","_pieces","_parts","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","ii","getBlob","SDPUtils","writeMediaSection","transceiver","caps","stream","dtlsRole","sdp","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","id","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","forEach","clockRate","JSON","parse","stringify","numChannels","rtcpFeedback","filter","fb","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","OperationError","edgeVersion","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","fireAddTrack","pc","receiver","streams","trackEvent","Event","setTimeout","_dispatchEvent","RTCPeerConnection","config","_eventTarget","document","createDocumentFragment","method","bind","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","iceServers","hasTurn","server","urls","url","warn","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","configurable","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","event","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","addEventListener","enabled","removeTrack","sender","stop","splice","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","shift","writable","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","removeEventListener","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","sections","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","params","encodings","rtcp","cname","compound","rtcpParameters","receive","sessionpart","Promise","reject","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","isRejected","rejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","resolve","receiverList","iceOptions","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","codec","isNewTrack","nativeTrack","removeTrackFromStreamAndFireEvent","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","reducedSize","addIceCandidate","candidateString","getStats","selector","MediaStreamTrack","senderOrReceiver","promises","all","then","allStats","results","Map","stats","stat","ortcObjectName","nativeGetstats","nativeStats","mapStats","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","methods","nativeMethod","args","random","line","part","prefix","parts","substring","address","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","sctpPort","fmt","writeSctpDescription","media","sctp","output","sessId","sessVer","sessUser","version","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","charAt","parcelRequire","PACKET_TYPES","create","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","result","readAsDataURL","supportsBinary","chars","lookup","decodeBase64Packet","binaryType","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","len","arraybuffer","decode","mapBinary","encodedPacket","SEPARATOR","Emitter","mixin","on","fn","_callbacks","once","off","removeListener","removeAllListeners","cb","callbacks","emit","emitReserved","listeners","hasListeners","globalThisShim","self","Function","pick","attr","reduce","acc","k","NATIVE_SET_TIMEOUT","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","setTimeoutFn","clearTimeoutFn","TransportError","reason","context","super","Transport","query","readyState","socket","onError","open","doOpen","doClose","onClose","packets","onOpen","onData","packet","onPacket","details","alphabet","prev","seed","encoded","yeast","now","encodeURIComponent","XMLHttpRequest","err","hasCORS","XHR","xdomain","empty","hasXHR2","responseType","Request","async","xd","xscheme","xs","xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","onreadystatechange","status","onLoad","requestsCount","requests","cleanup","fromError","abort","responseText","attachEvent","unloadHandler","nextTick","isReactNative","navigator","product","websocket","forceBase64","check","protocols","headers","ws","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","schema","secure","timestampRequests","timestampParam","b64","encodedQuery","hostname","path","polling","location","isSSL","poll","pause","onPause","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","request","req","xhrStatus","pollXhr","re","src","b","exec","source","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","closeOnBeforeunload","qs","qry","pairs","pair","decodeURIComponent","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","offlineEventListener","createTransport","EIO","priorWebsocketSuccess","onDrain","probe","onTransportOpen","msg","upgrading","freezeTransport","onTransportClose","onupgrade","to","onHandshake","resetPingTimeout","sendPacket","filterUpgrades","maxPayload","getWritablePackets","payloadSize","ceil","options","compress","cleanupAndClose","waitForUpgrade","filteredUpgrades","withNativeFile","isBinary","hasBinary","deconstructPacket","buffers","packetData","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","PacketType","Encoder","replacer","encode","EVENT","ACK","encodeAsString","BINARY_EVENT","BINARY_ACK","encodeAsBinary","nsp","deconstruction","unshift","Decoder","reviver","add","reconstructor","decodeString","BinaryReconstructor","takeBinaryData","next","payload","tryParse","isPayloadValid","static","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","receiveBuffer","sendBuffer","ids","acks","flags","auth","_autoConnect","subEvents","subs","onpacket","active","_readyState","ack","pop","_registerAckCallback","isTransportWritable","engine","volatile","notifyOutgoingListeners","timer","_packet","onconnect","onevent","onack","ondisconnect","message","emitEvent","_anyListeners","listener","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","max","factor","jitter","attempts","duration","rand","deviation","reset","setMin","setMax","setJitter","Manager","_a","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","skipReconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","delay","onreconnect","attempt","cache","loc","test","href","sameNamespace","forceNew","multiplex","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","wrapPeerConnectionEvent","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","disableLog","bool","disableWarnings","deprecated","oldMethod","newMethod","isObject","val","compactObject","accumulator","isObj","isEmptyObject","walkStats","base","resultSet","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","logging","shimGetUserMedia","browserDetails","mediaDevices","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","d","some","label","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia","onSuccess","webkitGetUserMedia","origGetUserMedia","cs","DOMException","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","webkitMediaStream","shimOnTrack","_ontrack","origSetRemoteDescription","_ontrackpoly","te","shimGetSendersWithDtmf","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","shimGetStats","origGetStats","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","makeMapStats","successCallbackWrapper_","shimSenderReceiverGetStats","origGetReceivers","receivers","srcElement","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","RegExp","replaceExternalStreamId","alreadyExists","oldStream","methodObj","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","webkitRTCPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","sdpSemantics","catch","origMSTEnabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","validTurn","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","rid","parseFloat","scaleResolutionDownBy","maxFramerate","getParameters","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","finally","shimCreateAnswer","origCreateAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","setDirection","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","browser","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","adapter","shimChrome","shimFirefox","shimEdge","shimSafari","mozGetUserMedia","userAgent","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","commonShim","browserShim","adapterFactory","$parcel$export","$af8cf1f663f490f4$var$webRTCAdapter","$af8cf1f663f490f4$export$25be9502477c137d","class_1","isIOS","platform","supportedBrowsers","minFirefoxVersion","minChromeVersion","minSafariVersion","isWebRTCSupported","isBrowserSupported","getBrowser","getVersion","isUnifiedPlanSupported","tempPc","supported","$06cb531ed7840f78$var$DEFAULT_CONFIG","credential","$06cb531ed7840f78$var$Util","Util","CLOUD_HOST","CLOUD_PORT","chunkedBrowsers","Chrome","chrome","chunkedMTU","defaultConfig","browserVersion","supports","webRTC","audioVideo","binaryBlob","reliable","ordered","_dataCount","noop","validateId","chunk","chunks","$06cb531ed7840f78$export$7debb50ef11d5e0b","__peerData","blobToArrayBuffer","fr","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","isSecure","$26088d7da5b03f69$exports","$26088d7da5b03f69$export$ecd1fc136c422448","$ac9b757d51178e15$exports","$ac9b757d51178e15$var$has","$ac9b757d51178e15$var$prefix","$ac9b757d51178e15$var$Events","$ac9b757d51178e15$var$EE","$ac9b757d51178e15$var$addListener","emitter","_events","_eventsCount","$ac9b757d51178e15$var$clearEvent","$ac9b757d51178e15$var$EventEmitter","__proto__","eventNames","events","getOwnPropertySymbols","handlers","ee","listenerCount","a1","a2","a3","a4","a5","addListener","prefixed","EventEmitter","$1615705ecc6adca3$exports","$1615705ecc6adca3$export$243e62d78d3b544d","$1615705ecc6adca3$export$2e2bcd8739ae039","$1615705ecc6adca3$var$__read","iterator","ar","done","$1615705ecc6adca3$var$__spreadArray","$1615705ecc6adca3$var$LOG_PREFIX","$60fadef21a2daafc$export$3157d57b4135e3bc","$60fadef21a2daafc$export$9547aaa2e39030ff","$60fadef21a2daafc$export$89f507cf986a947","$60fadef21a2daafc$export$3b5c4a4b6354f023","$60fadef21a2daafc$export$adb4a1754da6f10d","$1615705ecc6adca3$var$Logger","Logger","_logLevel","Disabled","logLevel","_i","All","_print","Warnings","Errors","setLogFunction","rest","$31d11a8d122cb4b7$exports","$31d11a8d122cb4b7$export$4798917dbf149b79","$0d1ed891c5cb27c0$exports","$31d11a8d122cb4b7$var$__extends","extendStatics","d1","b1","__","$31d11a8d122cb4b7$var$__read","$31d11a8d122cb4b7$var$__spreadArray","$31d11a8d122cb4b7$var$__values","_super","_this","_disconnected","_messagesQueue","wsProtocol","_baseUrl","token","_id","wsUrl","WebSocket","Message","_cleanup","Disconnected","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","_sendHeartbeat","_wsOpen","Heartbeat","e_1","copiedQueue","copiedQueue_1","copiedQueue_1_1","e_1_1","return","$353dee38f9ab557b$exports","$353dee38f9ab557b$export$4a84e95a2324ac29","$77f14d3e81888156$exports","$77f14d3e81888156$export$89e6bb5ad64bf4a","$77f14d3e81888156$var$__assign","$77f14d3e81888156$var$__awaiter","thisArg","_arguments","P","generator","fulfilled","step","adopt","$77f14d3e81888156$var$__generator","body","_","trys","ops","verb","op","connection","startConnection","peerConnection","_startPeerConnection","Media","_stream","_addTracksToConnection","originator","Data","dataConnection","initialize","_makeOffer","handleSDP","provider","_setupListeners","peerId","peer","connectionId","connectionType","Candidate","dst","getConnection","mediaConnection","_addStreamToMediaConnection","peerConnectionNotClosed","dataChannelNotClosed","err_2","err_1_1","sdpTransform","metadata","serialization","Offer","emitError","WebRTC","_makeAnswer","err_3","err_1_2","Answer","err_4","handleCandidate","ice","err_5","$0b3b332fd86c5202$exports","$0b3b332fd86c5202$export$23a2a68283c24d80","$0b3b332fd86c5202$var$__extends","_open","$353dee38f9ab557b$var$__extends","$353dee38f9ab557b$var$__assign","$353dee38f9ab557b$var$__values","_localStream","ID_PREFIX","_negotiator","Negotiator","_remoteStream","remoteStream","handleMessage","_payload","messages","_getMessages","messages_1","messages_1_1","_removeConnection","BaseConnection","$3356170d7bce7f20$exports","$3356170d7bce7f20$export$d365f7ad9d7df9c9","$3014d862dcc9946b$exports","$3014d862dcc9946b$export$c6913ae0ed687038","$3014d862dcc9946b$var$__extends","_queue","_processing","doNextTask","queue","enque","processing","$3356170d7bce7f20$var$__extends","$3356170d7bce7f20$var$__values","_buffer","_bufferSize","_buffering","_chunkedData","_encodingQueue","EncodingQueue","Binary","_bufferedSend","_dc","_configureDataChannel","_handleDataMessage","datatype","deserializedData","BinaryUTF8","unpackedData","ab1","_handleChunk","chunkInfo","data_1","chunked","_sendChunks","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blobs_1","blobs_1_1","blob_1","$9e85b3e1327369e6$exports","$9e85b3e1327369e6$export$2c4e825dc9120f87","$9e85b3e1327369e6$var$__awaiter","$9e85b3e1327369e6$var$__generator","_options","_buildRequest","URL","searchParams","fetch","referrerPolicy","retrieveId","error_1","pathError","text","listAllPeers","helpfulError","error_2","json","$26088d7da5b03f69$var$__extends","$26088d7da5b03f69$var$__assign","$26088d7da5b03f69$var$__values","$26088d7da5b03f69$var$__read","id1","userId","_lastServerId","_destroyed","_connections","_lostMessages","debug","DEFAULT_KEY","logFunction","_api","API","_createServerConnection","_delayedAbort","InvalidID","_initialize","_abort","ServerError","BrowserIncompatible","plainConnections","_b","_c","_d","_handleMessage","SocketError","Network","Close","SocketClosed","e_2","Open","IdTaken","UnavailableID","InvalidKey","Leave","_cleanupPeer","Expire","PeerUnavailable","MediaConnection","_addConnection","DataConnection","message_1","e_2_1","_storeMessage","connections","e_3","connections_1","connections_1_1","e_3_1","destroyed","e_4","e_4_1","e_5","connections_2","connections_2_1","e_5_1","currentId","peers","$70d766613f57b014$export$2e2bcd8739ae039","Peer","_LocalStream","aTrack","mediaRequested","onVideoTrackCb","vdTrack","canvas","createElement","ctx","getContext","fillRect","requestAnimationFrame","draw","captureStream","dummyTrack","toggleVideo","vStream","vTrack","toggleAudio","onVideoTrack","Mouse","position","pScrEl","scrollingElement","documentElement","lastScrEl","resetLastScrEl","handleWScroll","mouse","style","opacity","borderRadius","zIndex","background","mount","appendChild","move","left","top","getPosition","click","el","elementFromPoint","HTMLElement","focus","scroll","delta","mouseX","mouseY","dX","dY","Element","scrollLeft","scrollTop","scrollHeight","clientHeight","scrollWidth","clientWidth","styles","getComputedStyle","overflow","esl","est","parentElement","remove","removeChild","makeButton","defaultStyle","HTMLButtonElement","btn","padding","fontSize","border","cursor","display","alignItems","textTransform","marginRight","innerHTML","ConfirmWindow","popup","innerText","buttons","confirmBtn","color","declineBtn","marginTop","backgroundColor","boxShadow","font","pointerEvents","margin","onclick","_remove","acceptCall","TEXT_REJECT","TEXT_ANSWER_CALL","confirmDefault","isStr","RCStatus","setInputValue","nativeInputValueDescriptor","HTMLInputElement","RemoteControl","onGrand","onRelease","agentID","confirm","requestControl","Requesting","releaseControl","controlConfirm","allowed","grantControl","Enabled","sessionStorage","setItem","session_control_peer_key","removeItem","xy","focused","input","HTMLTextAreaElement","bubbles","isContentEditable","storedID","getItem","SS_START_TS_KEY","CallWindow","vRemote","vLocal","audioBtn","videoBtn","endCallBtn","agentNameElem","videoContainer","vPlaceholder","aRemote","localStream","videoRequested","iframe","bottom","right","setAttribute","doc","contentDocument","baseHref","load","assistSection","getElementById","classList","adjustIframeSize","querySelector","tsElem","startTs","tsInterval","setInterval","secsFull","mins","secs","dragArea","movingEl","dropArea","startX","clientX","startY","clientY","bbox","getBoundingClientRect","userMoved","passive","userReleased","raf","deltaX","deltaY","innerWidth","innerHeight","userMovedRaf","transform","cancelAnimationFrame","attachDND","setCallEndAction","endCall","setRemoteStream","rStream","srcObject","autoplay","checkRemoteVideoInterval","clearInterval","settings","shouldBeEnabled","toggleRemoteVideoUI","enable","setLocalStream","lStream","playRemote","play","setAssistentName","toggleAudioUI","toggleVideoUI","AnnotationCanvas","painting","resizeCanvas","lastPosition","clrTmID","fadeOut","globalAlpha","beginPath","moveTo","lineTo","lineWidth","lineCap","lineJoin","strokeStyle","stroke","timeoutID","fadeStep","globalCompositeOperation","fillStyle","clearRect","parentNode","CallingState","Assist","app","noSecureMode","assistDemandedRestart","callingState","False","agents","onRemoteCallEnd","session_calling_peer_key","onCallStart","onAgentConnect","onRemoteControlStart","callConfirm","hidden","sendActivityState","attachEventListener","titleNode","observer","MutationObserver","pageTitle","title","attachStartCallback","onStart","observe","subtree","characterData","childList","attachStopCallback","clean","attachCommitCallback","agentsConnected","session","attachUpdateCallback","sessInfo","notifyCallEnd","peerID","getProjectKey","getSessionID","getHost","getSessionInfo","remoteControl","onControlReleased","annot","clientID","nodeID","nodes","getNode","info","onDisconnect","confirmCall","callingAgent","agentName","peerOptions","setCallingState","True","confirmAnswer","confirmText","confirmStyle","playNotificationSound","agreed","callUI","onCallEnd","handleCallEnd","initiateCallEnd","aStream","onInteraction","Audio","appOptions","checkRequiredVersion","notify","assist","__DISABLE_SECURE_MODE"],"sourceRoot":""}